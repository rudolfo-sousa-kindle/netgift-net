{"ast":null,"code":"import axios from \"axios\";\nimport { parse } from \"path\";\nexport const FETCH_GIFT_BEGIN = 'FETCH_GIFT_BEGIN';\nexport const FETCH_GIFT_BEGIN_NEXT = 'FETCH_GIFT_BEGIN_NEXT';\nexport const FETCH_GIFT_SUCCESS = 'FETCH_GIFT_SUCCESS';\nexport const FETCH_ONEGIFT_SUCCESS = 'FETCH_ONEGIFT_SUCCESS';\nexport const FETCH_GIFTCATEGORIES_SUCCESS = 'FETCH_GIFTCATEGORIES_SUCCESS';\nexport const FETCH_GIFT_FAILURE = 'FETCH_GIFT_FAILURE';\nexport const SEND_GIFT_SUCCESS = 'SEND_GIFT_SUCCESS';\nexport const SEND_GIFT_BEGIN = 'SEND_GIFT_BEGIN';\nconst URL = \"http://51.15.99.120:4700\";\nconst urlWP = \"https://www.localkindle.com.br/netgift_api/wp-json/ntgift/api\";\nconst config = {\n  headers: {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Headers\": \"*\"\n  }\n};\nexport const fetchGiftsBegin = () => ({\n  type: FETCH_GIFT_BEGIN\n});\nexport const fetchGiftsBeginNextLine = () => ({\n  type: FETCH_GIFT_BEGIN_NEXT\n});\nexport const fetchGiftsSuccess = gifts => ({\n  type: FETCH_GIFT_SUCCESS,\n  payload: {\n    gifts\n  }\n});\nexport const fetchGiftSuccess = gift => ({\n  type: FETCH_ONEGIFT_SUCCESS,\n  payload: {\n    gift\n  }\n});\nexport const fetchGiftsCategoriesSuccess = gifts => ({\n  type: FETCH_GIFTCATEGORIES_SUCCESS,\n  payload: {\n    gifts\n  }\n});\nexport const fetchGiftsFailure = error => ({\n  type: FETCH_GIFT_FAILURE,\n  payload: {\n    error\n  }\n});\nexport const sendGiftBegin = () => ({\n  type: SEND_GIFT_BEGIN\n});\nexport const sendGiftSuccess = data => ({\n  type: SEND_GIFT_SUCCESS,\n  payload: {\n    data\n  }\n});\nvar gifts = [];\nexport function fetchGifts(search = null, categories = null, count = 1) {\n  var data_send = {};\n\n  if (search) {\n    data_send['search'] = search;\n  }\n\n  if (categories) {\n    data_send['category_id'] = categories;\n  }\n\n  return dispatch => {\n    if (!search && count < 1) {\n      dispatch(fetchGiftsBegin());\n    } else {\n      dispatch(fetchGiftsBeginNextLine());\n    }\n\n    return axios.post(\"\".concat(URL, \"/gift/search/10/\") + count, data_send, config).then(response => {\n      var data = response.data;\n      var GIFTS = data.GIFTS;\n      gifts.push(GIFTS);\n\n      if (search || count == 1) {\n        dispatch(fetchGiftsSuccess(GIFTS));\n      } else {\n        dispatch(fetchGiftsSuccess(gifts));\n      }\n\n      return gifts;\n    }).catch(error => dispatch(fetchGiftsFailure(error)));\n  };\n}\nexport function fetchGiftCategories() {\n  return dispatch => {\n    dispatch(fetchGiftsBegin());\n    return axios.get(\"\".concat(URL, \"/gift/categories\"), config).then(response => {\n      var data = response.data;\n      dispatch(fetchGiftsCategoriesSuccess(data));\n      return data;\n    }).catch(error => dispatch(fetchGiftsFailure(error)));\n  };\n}\nexport function fetchGift(id) {\n  return dispatch => {\n    dispatch(fetchGiftsBegin());\n    return axios.get(\"\".concat(URL, \"/gift/\") + id, config).then(response => {\n      var data = response.data;\n      console.log(data);\n      dispatch(fetchGiftSuccess(data));\n      return data;\n    }).catch(error => dispatch(fetchGiftsFailure(error)));\n  };\n}\nexport function sendGift({\n  description,\n  nome_presente,\n  image,\n  category_id,\n  price\n}, history) {\n  return async dispatch => {\n    dispatch(fetchGiftsBegin());\n    var categoria = 1;\n    categoria = category_id.split(\",\");\n    var priceFloat = parseFloat(price);\n    var categoryFloat = parseFloat(category_id);\n    axios.post(\"\".concat(URL, \"/gift\"), {\n      \"name\": nome_presente,\n      \"description\": description,\n      \"image\": image,\n      \"price\": priceFloat,\n      \"category_id\": categoryFloat\n    }, config).then(response => {\n      var data = response.data;\n\n      for (var i = 1; i < categoria.length; i++) {\n        var item = categoria[i];\n        axios.post(\"\".concat(URL, \"/gift/\") + data.id + \"/category/\" + item).then(res => {\n          console.log(res);\n        });\n      }\n\n      dispatch(sendGiftSuccess(data.success));\n      return data;\n    }).catch(error => dispatch(fetchGiftsFailure(error)));\n  };\n}\nexport function editGift({\n  description,\n  nome_presente,\n  image,\n  category_id,\n  price\n}, history, id) {\n  return async dispatch => {\n    dispatch(sendGiftBegin());\n    var priceFloat = parseFloat(price);\n    var categoryFloat = parseFloat(category_id);\n    axios.put(\"\".concat(URL, \"/gift/\").concat(id), {\n      \"name\": nome_presente,\n      \"description\": description,\n      \"image\": image,\n      \"price\": priceFloat\n    }, config).then(response => {\n      var data = response.data;\n      dispatch(sendGiftSuccess(data));\n      history.push(\"/dashboard/presentes\");\n      return data;\n    }).catch(error => dispatch(fetchGiftsFailure(error)));\n  };\n}","map":{"version":3,"sources":["/Users/rudolfo/Documents/projects/NetGift/src/actions/giftActions.js"],"names":["axios","parse","FETCH_GIFT_BEGIN","FETCH_GIFT_BEGIN_NEXT","FETCH_GIFT_SUCCESS","FETCH_ONEGIFT_SUCCESS","FETCH_GIFTCATEGORIES_SUCCESS","FETCH_GIFT_FAILURE","SEND_GIFT_SUCCESS","SEND_GIFT_BEGIN","URL","urlWP","config","headers","fetchGiftsBegin","type","fetchGiftsBeginNextLine","fetchGiftsSuccess","gifts","payload","fetchGiftSuccess","gift","fetchGiftsCategoriesSuccess","fetchGiftsFailure","error","sendGiftBegin","sendGiftSuccess","data","fetchGifts","search","categories","count","data_send","dispatch","post","then","response","GIFTS","push","catch","fetchGiftCategories","get","fetchGift","id","console","log","sendGift","description","nome_presente","image","category_id","price","history","categoria","split","priceFloat","parseFloat","categoryFloat","i","length","item","res","success","editGift","put"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { parse } from \"path\";\n\nexport const FETCH_GIFT_BEGIN   = 'FETCH_GIFT_BEGIN';\nexport const FETCH_GIFT_BEGIN_NEXT   = 'FETCH_GIFT_BEGIN_NEXT';\nexport const FETCH_GIFT_SUCCESS = 'FETCH_GIFT_SUCCESS';\nexport const FETCH_ONEGIFT_SUCCESS = 'FETCH_ONEGIFT_SUCCESS';\nexport const FETCH_GIFTCATEGORIES_SUCCESS = 'FETCH_GIFTCATEGORIES_SUCCESS';\nexport const FETCH_GIFT_FAILURE = 'FETCH_GIFT_FAILURE';\nexport const SEND_GIFT_SUCCESS = 'SEND_GIFT_SUCCESS';\nexport const SEND_GIFT_BEGIN = 'SEND_GIFT_BEGIN';\n\nconst URL   = \"http://51.15.99.120:4700\";\nconst urlWP = \"https://www.localkindle.com.br/netgift_api/wp-json/ntgift/api\";\n\nconst config = {\n  headers: {\"Access-Control-Allow-Origin\": \"*\", \"Access-Control-Allow-Headers\": \"*\"},\n}\n\nexport const fetchGiftsBegin = () => ({\n  type: FETCH_GIFT_BEGIN\n});\n\nexport const fetchGiftsBeginNextLine = () => ({\n  type: FETCH_GIFT_BEGIN_NEXT\n});\n\nexport const fetchGiftsSuccess = gifts => ({\n  type: FETCH_GIFT_SUCCESS,\n  payload: { gifts }\n});\n\nexport const fetchGiftSuccess = gift => ({\n  type: FETCH_ONEGIFT_SUCCESS,\n  payload: { gift }\n});\n\nexport const fetchGiftsCategoriesSuccess = gifts => ({\n  type: FETCH_GIFTCATEGORIES_SUCCESS,\n  payload: { gifts }\n});\n\nexport const fetchGiftsFailure = error => ({\n  type: FETCH_GIFT_FAILURE,\n  payload: { error }\n});\n\nexport const sendGiftBegin = () => ({\n  type: SEND_GIFT_BEGIN\n})\n\nexport const sendGiftSuccess = data => ({\n  type: SEND_GIFT_SUCCESS,\n  payload: { data }\n})\n\nvar gifts = [];\n\nexport function fetchGifts( search = null, categories = null, count = 1 ) {\n  var data_send = {};\n\n  if ( search ) {\n    data_send['search'] = search;\n  }\n\n  if ( categories ) {\n    data_send['category_id'] = categories;\n  }\n\n  return dispatch => {\n    if(!search && count < 1){\n      dispatch(fetchGiftsBegin());\n    }else{\n      dispatch(fetchGiftsBeginNextLine());\n    }\n\n    return axios.post(`${URL}/gift/search/10/` + count, data_send, config)\n      .then((response) => {\n        var {data} = response;\n        var {GIFTS} = data;\n        gifts.push(GIFTS);\n        if(search || count == 1){\n          dispatch(fetchGiftsSuccess(GIFTS));\n        }else{\n          dispatch(fetchGiftsSuccess(gifts));\n        }\n        return gifts;\n        })\n      .catch(error => dispatch(fetchGiftsFailure(error)));\n  };\n}\n\nexport function fetchGiftCategories(){\n  return dispatch => {\n    dispatch(fetchGiftsBegin());\n    return axios.get(`${URL}/gift/categories`, config)\n      .then((response) => {\n        var {data} = response;\n        dispatch(fetchGiftsCategoriesSuccess(data));\n        return data;\n        })\n      .catch(error => dispatch(fetchGiftsFailure(error)));\n  };\n}\n\nexport function fetchGift(id){\n  return dispatch => {\n    dispatch(fetchGiftsBegin());\n    return axios.get(`${URL}/gift/` + id, config)\n      .then((response) => {\n        var {data} = response;\n        console.log(data)\n        dispatch(fetchGiftSuccess(data));\n        return data;\n      })\n      .catch(error => dispatch(fetchGiftsFailure(error)));\n  }\n}\n\nexport function sendGift({description, nome_presente, image, category_id, price}, history){\n  return async dispatch => {\n    dispatch(fetchGiftsBegin());\n    var categoria = 1;\n    categoria = category_id.split(\",\");\n    var priceFloat = parseFloat(price);\n    var categoryFloat = parseFloat(category_id);\n    axios.post(`${URL}/gift`, { \"name\" : nome_presente ,\"description\" : description, \"image\" : image, \"price\" : priceFloat, \"category_id\" : categoryFloat }, config)\n      .then((response) => {\n        var {data} = response;\n        for(var i = 1; i < categoria.length; i++){\n          var item = categoria[i];\n          axios.post(`${URL}/gift/` + data.id + `/category/` + item)\n          .then((res) => {\n            console.log(res)\n          })\n        }\n        dispatch(sendGiftSuccess(data.success));\n        return data;\n      })\n      .catch(error => dispatch(fetchGiftsFailure(error)));\n  }\n}\n\nexport function editGift({description, nome_presente, image, category_id, price}, history, id){\n  return async dispatch => {\n    dispatch(sendGiftBegin());\n    var priceFloat = parseFloat(price);\n    var categoryFloat = parseFloat(category_id);\n    axios.put(`${URL}/gift/${id}`, { \"name\" : nome_presente ,\"description\" : description, \"image\" : image, \"price\" : priceFloat }, config)\n      .then((response) => {\n        var {data} = response;\n        dispatch(sendGiftSuccess(data));\n        history.push(\"/dashboard/presentes\")\n        return data;\n      })\n      .catch(error => dispatch(fetchGiftsFailure(error)));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}