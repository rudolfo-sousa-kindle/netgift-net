{"ast":null,"code":"import jQuery from 'jquery';\n\n(function ($) {\n  $.fn.dataTable.pageLoadMore = function (opts) {\n    var conf = $.extend({\n      url: \"\",\n      data: null,\n      method: \"GET\"\n    }, opts);\n    var cacheLastRequest = null;\n    var cacheLastJson = null;\n    return function (request, drawCallback, settings) {\n      if (!settings.hasOwnProperty(\"pageLoadMore\")) {\n        var api = new $.fn.dataTable.Api(settings);\n        var info = api.page.info();\n        settings.pageLoadMore = {\n          pageLength: info.length\n        };\n      }\n\n      var pageResetMore = false;\n\n      if (cacheLastRequest) {\n        if (JSON.stringify(request.order) !== JSON.stringify(cacheLastRequest.order) || JSON.stringify(request.columns) !== JSON.stringify(cacheLastRequest.columns) || JSON.stringify(request.search) !== JSON.stringify(cacheLastRequest.search)) {\n          pageResetMore = true;\n        }\n      }\n\n      cacheLastRequest = $.extend(true, {}, request);\n\n      if (pageResetMore) {\n        cacheLastJson = null;\n        request.length = settings.pageLoadMore.pageLength;\n      }\n\n      request.start = request.length - settings.pageLoadMore.pageLength;\n      request.length = settings.pageLoadMore.pageLength;\n\n      if ($.isFunction(conf.data)) {\n        var d = conf.data(request);\n\n        if (d) {\n          $.extend(request, d);\n        }\n      } else {\n        if ($.isPlainObject(conf.data)) {\n          $.extend(request, conf.data);\n        }\n      }\n\n      settings.jqXHR = $.ajax({\n        \"type\": conf.method,\n        \"url\": conf.url,\n        \"data\": request,\n        \"dataType\": \"json\",\n        \"cache\": false,\n        \"success\": function (json) {\n          if (cacheLastJson) {\n            json.data = cacheLastJson.data.concat(json.data);\n          }\n\n          cacheLastJson = $.extend(true, {}, json);\n          drawCallback(json);\n        }\n      });\n    };\n  };\n\n  $.fn.dataTable.Api.register(\"page.resetMore()\", function () {\n    return this.iterator(\"table\", function (settings) {\n      var api = this;\n\n      if (settings.hasOwnProperty(\"pageLoadMore\")) {\n        api.page.len(settings.pageLoadMore.pageLength);\n      }\n    });\n  });\n  $.fn.dataTable.Api.register(\"page.hasMore()\", function () {\n    var api = this;\n    var info = api.page.info();\n    return info.pages > 1 ? true : false;\n  });\n  $.fn.dataTable.Api.register(\"page.loadMore()\", function () {\n    return this.iterator(\"table\", function (settings) {\n      var api = this;\n      var info = api.page.info();\n\n      if (info.pages > 1) {\n        if (!settings.hasOwnProperty(\"pageLoadMore\")) {\n          settings.pageLoadMore = {\n            pageLength: info.length\n          };\n        }\n\n        api.page.len(info.length + settings.pageLoadMore.pageLength).draw(\"page\");\n      }\n    });\n  });\n})(jQuery);","map":{"version":3,"sources":["/Users/rudolfo/Documents/projects/NetGift/src/assets/js/dataTables.pageLoadMore.min.js"],"names":["jQuery","$","fn","dataTable","pageLoadMore","opts","conf","extend","url","data","method","cacheLastRequest","cacheLastJson","request","drawCallback","settings","hasOwnProperty","api","Api","info","page","pageLength","length","pageResetMore","JSON","stringify","order","columns","search","start","isFunction","d","isPlainObject","jqXHR","ajax","json","concat","register","iterator","len","pages","draw"],"mappings":"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","sourcesContent":["import jQuery from 'jquery';\n\n(function($){$.fn.dataTable.pageLoadMore=function(opts){var conf=$.extend({url:\"\",data:null,method:\"GET\"},opts);var cacheLastRequest=null;var cacheLastJson=null;return function(request,drawCallback,settings){if(!settings.hasOwnProperty(\"pageLoadMore\")){var api=new $.fn.dataTable.Api(settings);var info=api.page.info();settings.pageLoadMore={pageLength:info.length};}var pageResetMore=false;if(cacheLastRequest){if(JSON.stringify(request.order)!==JSON.stringify(cacheLastRequest.order)||JSON.stringify(request.columns)!==JSON.stringify(cacheLastRequest.columns)||JSON.stringify(request.search)!==JSON.stringify(cacheLastRequest.search)){pageResetMore=true;}}cacheLastRequest=$.extend(true,{},request);if(pageResetMore){cacheLastJson=null;request.length=settings.pageLoadMore.pageLength;}request.start=request.length-settings.pageLoadMore.pageLength;request.length=settings.pageLoadMore.pageLength;if($.isFunction(conf.data)){var d=conf.data(request);if(d){$.extend(request,d);}}else{if($.isPlainObject(conf.data)){$.extend(request,conf.data);}}settings.jqXHR=$.ajax({\"type\":conf.method,\"url\":conf.url,\"data\":request,\"dataType\":\"json\",\"cache\":false,\"success\":function(json){if(cacheLastJson){json.data=cacheLastJson.data.concat(json.data);}cacheLastJson=$.extend(true,{},json);drawCallback(json);}});};};$.fn.dataTable.Api.register(\"page.resetMore()\",function(){return this.iterator(\"table\",function(settings){var api=this;if(settings.hasOwnProperty(\"pageLoadMore\")){api.page.len(settings.pageLoadMore.pageLength);}});});$.fn.dataTable.Api.register(\"page.hasMore()\",function(){var api=this;var info=api.page.info();return(info.pages>1)?true:false;});$.fn.dataTable.Api.register(\"page.loadMore()\",function(){return this.iterator(\"table\",function(settings){var api=this;var info=api.page.info();if(info.pages>1){if(!settings.hasOwnProperty(\"pageLoadMore\")){settings.pageLoadMore={pageLength:info.length};}api.page.len(info.length+settings.pageLoadMore.pageLength).draw(\"page\");}});});})(jQuery);\n"]},"metadata":{},"sourceType":"module"}