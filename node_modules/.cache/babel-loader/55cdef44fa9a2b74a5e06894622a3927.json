{"ast":null,"code":"/* eslint no-undef: \"off\"*/\nimport jQuery from 'jquery';\n\n(function ($) {\n  var default_options = {\n    url: window.location.pathname + window.location.search,\n    inputID: '',\n    queueID: '',\n    dropzoneID: '',\n    files: [],\n    fieldName: 'filedata',\n    extraFields: {},\n    lang: 'en',\n    sizeLimit: 0,\n    filesLimit: 0,\n    method: 'post',\n    timeout: null,\n    autostart: false,\n    templateFile: '<div id=\"fileup-[INPUT_ID]-[FILE_NUM]\" class=\"fileup-file [TYPE]\">' + '<div class=\"fileup-preview\">' + '<img src=\"[PREVIEW_SRC]\" alt=\"[NAME]\"/>' + '</div>' + '<div class=\"fileup-container\">' + '<div class=\"fileup-description\">' + '<span class=\"fileup-name\">[NAME]</span> (<span class=\"fileup-size\">[SIZE_HUMAN]</span>)' + '</div>' + '<div class=\"fileup-controls\">' + '<span class=\"fileup-remove\" data-id=\"\\'[INPUT_ID]\\'\" data-action=\"\\'onRemove\\'\" data-file-num=\"\\'[FILE_NUM]\\'\" title=\"[REMOVE]\"></span>' + '<span class=\"fileup-upload\" onclick=\"$.fileup(\\'[INPUT_ID]\\', \\'upload\\', \\'[FILE_NUM]\\');\">[UPLOAD]</span>' + '<span class=\"fileup-abort\" onclick=\"$.fileup(\\'[INPUT_ID]\\', \\'abort\\', \\'[FILE_NUM]\\');\" style=\"display:none\">[ABORT]</span>' + '</div>' + '<div class=\"fileup-result\"></div>' + '<div class=\"fileup-progress\">' + '<div class=\"fileup-progress-bar\"></div>' + '</div>' + '</div>' + '<div class=\"fileup-clear\"></div>' + '</div>',\n    onSelect: function (file) {},\n    onRemove: function (file_number, total, file) {},\n    onBeforeStart: function (file_number, xhr, file) {},\n    onStart: function (file_number, file) {},\n    onStartSystem: function (file_number, file) {\n      var options = this.fileup.options;\n      var $file = $('#fileup-' + options.inputID + '-' + file_number);\n      $file.find('.fileup-controls .fileup-upload').hide();\n      $file.find('.fileup-controls .fileup-abort').show();\n      $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n    },\n    onProgress: function (event, file_number, ProgressEvent, file) {\n      if (event.lengthComputable) {\n        var options = this.fileup.options;\n        var percent = Math.ceil(ProgressEvent.loaded / ProgressEvent.total * 100);\n        $('#fileup-' + options.inputID + '-' + file_number + ' .fileup-progress-bar').css('width', percent + \"%\");\n      }\n    },\n    onSuccess: function (file_number, response, file) {},\n    onError: function (event, file, file_number, response) {},\n    onErrorSystem: function (event, file, file_number) {\n      var options = this.fileup.options;\n\n      switch (event) {\n        case 'files_limit':\n          var message = i18n[options.lang].errorFilesLimit;\n          alert(message.replace(/%filesLimit%/g, options.filesLimit));\n          break;\n\n        case 'size_limit':\n          var size = formatHuman(options.sizeLimit);\n          var message = i18n[options.lang].errorSizeLimit;\n          message = message.replace(/%sizeLimit%/g, size);\n          message = message.replace(/%fileName%/g, file.name);\n          alert(message);\n          break;\n\n        case 'file_type':\n          var message = i18n[options.lang].errorFileType;\n          alert(message.replace(/%fileName%/g, file.name));\n          break;\n\n        case 'bad_status':\n        case 'error_load':\n          var $file = $('#fileup-' + options.inputID + '-' + file_number);\n          $file.find('.fileup-controls .fileup-abort').hide();\n          $file.find('.fileup-controls .fileup-upload').show();\n          $file.find('.fileup-result').addClass('fileup-error').text(i18n[options.lang].error);\n          break;\n\n        case 'old_browser':\n          alert(i18n[options.lang].errorOldBrowser);\n          break;\n      }\n    },\n    onAbort: function (file_number, file) {},\n    onAbortSystem: function (file_number, file) {\n      var options = this.fileup.options;\n      var $file = $('#fileup-' + options.inputID + '-' + file_number);\n      $file.find('.fileup-controls .fileup-abort').hide();\n      $file.find('.fileup-controls .fileup-upload').show();\n      $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n    },\n    onTimeout: function (file_number, file) {},\n    onTimeoutSystem: function (file_number, file) {\n      var options = this.fileup.options;\n      var $file = $('#fileup-' + options.inputID + '-' + file_number);\n      $file.find('.fileup-controls .fileup-abort').hide();\n      $file.find('.fileup-controls .fileup-upload').show();\n      $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n    },\n    onFinish: function (file_number, file) {},\n    onSuccessSystem: function (response, file_number, file) {\n      var options = this.fileup.options;\n      var $file = $('#fileup-' + options.inputID + '-' + file_number);\n      $file.find('.fileup-controls .fileup-abort').hide();\n      $file.find('.fileup-controls .fileup-upload').hide();\n      $file.find('.fileup-result').removeClass('fileup-error').addClass('fileup-success').text(i18n[options.lang].complete);\n    },\n    onDragOver: function (event) {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'copy';\n    },\n    onDragLeave: function (event) {},\n    onDragEnd: function (event) {},\n    onDragEnter: function (event) {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'copy';\n    }\n  };\n  var events = {\n    addEvent: function (input, name, callback) {\n      var stack = input.fileup.events[name] || [];\n      stack.push(callback);\n      input.fileup.events[name] = stack;\n    },\n    removeEvents: function (input, name) {\n      input.fileup.events[name] = [];\n    },\n    callEvent: function (input, name, args) {\n      var result = true,\n          event_result;\n\n      if (input.fileup.events[name]) {\n        for (var i = 0; i < input.fileup.events[name].length; i++) {\n          if (typeof input.fileup.events[name][i] === 'function') {\n            if (args) {\n              event_result = input.fileup.events[name][i].apply(input, args);\n\n              if (result && event_result === false) {\n                result = false;\n              }\n            } else {\n              event_result = input.fileup.events[name][i].apply(input);\n\n              if (result && event_result === false) {\n                result = false;\n              }\n            }\n          }\n        }\n      }\n\n      return result;\n    }\n  };\n  var eventRegister = {\n    input: {},\n    select: function (callback) {\n      events.addEvent(eventRegister.input, 'select', callback);\n      return eventRegister;\n    },\n    remove: function (callback) {\n      events.addEvent(eventRegister.input, 'remove', callback);\n      return eventRegister;\n    },\n    beforeStart: function (callback) {\n      events.addEvent(eventRegister.input, 'beforeStart', callback);\n      return eventRegister;\n    },\n    start: function (callback) {\n      events.addEvent(eventRegister.input, 'start', callback);\n      return eventRegister;\n    },\n    progress: function (callback) {\n      events.addEvent(eventRegister.input, 'progress', callback);\n      return eventRegister;\n    },\n    success: function (callback) {\n      events.addEvent(eventRegister.input, 'success', callback);\n      return eventRegister;\n    },\n    error: function (callback) {\n      events.addEvent(eventRegister.input, 'error', callback);\n      return eventRegister;\n    },\n    abort: function (callback) {\n      events.addEvent(eventRegister.input, 'abort', callback);\n      return eventRegister;\n    },\n    timeout: function (callback) {\n      events.addEvent(eventRegister.input, 'timeout', callback);\n      return eventRegister;\n    },\n    dragOver: function (callback) {\n      events.addEvent(eventRegister.input, 'dragOver', callback);\n      return eventRegister;\n    },\n    dragLeave: function (callback) {\n      events.addEvent(eventRegister.input, 'dragLeave', callback);\n      return eventRegister;\n    },\n    dragEnd: function (callback) {\n      events.addEvent(eventRegister.input, 'dragEnd', callback);\n      return eventRegister;\n    },\n    dragEnter: function (callback) {\n      events.addEvent(eventRegister.input, 'dragEnter', callback);\n      return eventRegister;\n    }\n  };\n  var i18n = {\n    ru: {\n      upload: 'Загрузить',\n      abort: 'Остановить',\n      remove: 'Удалить',\n      complete: 'Готово',\n      error: 'Ошибка',\n      errorFilesLimit: 'Количество выбранных файлов превышает лимит (%filesLimit%)',\n      errorSizeLimit: 'Файл \"%fileName%\" превышает предельный размер (%sizeLimit%)',\n      errorFileType: 'Файл \"%fileName%\" является некорректным',\n      errorOldBrowser: 'Ваш браузер не может загружать файлы. Обновите его до последней версии'\n    },\n    en: {\n      upload: 'Upload',\n      abort: 'Abort',\n      remove: 'Remove',\n      complete: 'Complete',\n      error: 'Error',\n      errorFilesLimit: 'The number of selected files exceeds the limit (%filesLimit%)',\n      errorSizeLimit: 'File \"%fileName%\" exceeds the size limit (%sizeLimit%)',\n      errorFileType: 'File \"%fileName%\" is incorrect',\n      errorOldBrowser: 'Your browser can not upload files. Update to the latest version'\n    },\n    ptbr: {\n      upload: 'Enviar imagem',\n      abort: 'Cancelar',\n      remove: 'Excluir',\n      complete: 'Concluído',\n      error: 'Erro',\n      errorFilesLimit: 'Limite máximo de %filesLimit%',\n      errorSizeLimit: 'O arquivo \"%fileName%\" excede o limite de tamanho de %sizeLimit%',\n      errorFileType: 'O arquivo \"%fileName%\" é inválido',\n      errorOldBrowser: 'Seu navegador não suporte este recurso'\n    }\n  };\n  /**\n   * Init fileup\n   * @param {object} param1\n   */\n\n  function init(param1) {\n    var options = $.extend(false, default_options, param1);\n    var input = document.getElementById(options.inputID);\n\n    if (input && input.type === 'file') {\n      if (options.dropzoneID) {\n        var dropZone = document.getElementById(options.dropzoneID);\n\n        if (dropZone) {\n          dropZone.addEventListener('dragover', function (event) {\n            events.callEvent(input, 'dragOver', [event]);\n          });\n          dropZone.addEventListener('dragleave', function (event) {\n            events.callEvent(input, 'dragLeave', [event]);\n          });\n          dropZone.addEventListener('dragenter', function (event) {\n            events.callEvent(input, 'dragEnter', [event]);\n          });\n          dropZone.addEventListener('drop', dropFiles);\n          dropZone.fileup = {\n            input: input\n          };\n        }\n      }\n\n      input.fileup = {\n        files: {},\n        nextID: 0,\n        options: options,\n        events: {}\n      };\n      events.addEvent(input, 'select', options.onSelect);\n      events.addEvent(input, 'remove', options.onRemove);\n      events.addEvent(input, 'beforeStart', options.onBeforeStart);\n      events.addEvent(input, 'start', options.onStartSystem);\n      events.addEvent(input, 'start', options.onStart);\n      events.addEvent(input, 'progress', options.onProgress);\n      events.addEvent(input, 'success', options.onSuccessSystem);\n      events.addEvent(input, 'success', options.onSuccess);\n      events.addEvent(input, 'error', options.onErrorSystem);\n      events.addEvent(input, 'error', options.onError);\n      events.addEvent(input, 'abort', options.onAbortSystem);\n      events.addEvent(input, 'abort', options.onAbort);\n      events.addEvent(input, 'timeout', options.onTimeoutSystem);\n      events.addEvent(input, 'timeout', options.onTimeout);\n      events.addEvent(input, 'dragOver', options.onDragOver);\n      events.addEvent(input, 'dragLeave', options.onDragLeave);\n      events.addEvent(input, 'dragEnd', options.onDragEnd);\n      events.addEvent(input, 'dragEnter', options.onDragEnter);\n      $(input).on('change', appendFiles);\n\n      if (options.files.length > 0) {\n        for (var i = 0; i < options.files.length; i++) {\n          var tpl = options.templateFile;\n          tpl = tpl.replace(/\\[INPUT_ID\\]/g, options.inputID);\n          tpl = tpl.replace(/\\[FILE_NUM\\]/g, input.fileup.nextID);\n          tpl = tpl.replace(/\\[NAME\\]/g, options.files[i].name);\n          tpl = tpl.replace(/\\[SIZE_HUMAN\\]/g, formatHuman(options.files[i].size));\n          tpl = tpl.replace(/\\[UPLOAD\\]/g, i18n[options.lang].upload);\n          tpl = tpl.replace(/\\[REMOVE\\]/g, i18n[options.lang].remove);\n          tpl = tpl.replace(/\\[ABORT\\]/g, i18n[options.lang].abort);\n          input.fileup.files[input.fileup.nextID] = {\n            xhr: null,\n            file: options.files[i],\n            file_number: input.fileup.nextID,\n            status: 'loaded'\n          };\n\n          if (options.files[i].previewUrl) {\n            tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, options.files[i].previewUrl);\n            tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-image');\n          } else {\n            tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, \"\");\n            tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-doc');\n          }\n\n          $('#' + options.queueID).append(tpl).find('.fileup-progress, .fileup-result, .fileup-upload, .fileup-abort').remove();\n\n          if (options.files[i].downloadUrl) {\n            var $name = $('#fileup-' + options.inputID + '-' + input.fileup.nextID).find('.fileup-name');\n\n            if ($name[0]) {\n              $name.replaceWith('<a href=\"' + options.files[i].downloadUrl + '\" class=\"fileup-name\" ' + 'download=\"' + options.files[i].name + '\">' + options.files[i].name + '</a>');\n            }\n          }\n\n          input.fileup.nextID++;\n        }\n      }\n    }\n  }\n  /**\n   * Drop files in queue\n   * @param {object} event\n   */\n\n\n  function dropFiles(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    var input = event.target.fileup.input;\n    var options = input.fileup.options;\n    var files = event.target.files || event.dataTransfer.files;\n\n    if (files.length) {\n      for (var i = 0; i < files.length; i++) {\n        var file = files[i];\n\n        if (options.sizeLimit > 0 && getFileSize(file) > options.sizeLimit) {\n          events.callEvent(input, 'error', ['size_limit', file]);\n          continue;\n        }\n\n        if (options.filesLimit > 0 && Object.keys(files).length >= options.filesLimit) {\n          events.callEvent(input, 'error', ['files_limit', file]);\n          break;\n        }\n\n        if (typeof input.accept === 'string') {\n          var accept = input.accept;\n\n          if (accept && /[^\\w]+/.test(accept)) {\n            var is_accept = false;\n            var types = accept.split(',');\n\n            if (types.length > 0) {\n              for (var t = 0; t < types.length; t++) {\n                types[t] = types[t].replace(/\\s/g, '');\n\n                if (new RegExp(types[t].replace('*', '.*')).test(file.type) || new RegExp(types[t].replace('.', '.*/')).test(file.type)) {\n                  is_accept = true;\n                  break;\n                }\n              }\n            }\n\n            if (!is_accept) {\n              events.callEvent(input, 'error', ['file_type', file]);\n              continue;\n            }\n          }\n        }\n\n        if (events.callEvent(input, 'select', [file]) === false) {\n          continue;\n        }\n\n        appendFile(file, input);\n      }\n\n      $(input).val('');\n    }\n\n    events.callEvent(input, 'dragEnd', [event]);\n  }\n  /**\n   * Append files in queue\n   */\n\n\n  function appendFiles() {\n    if (this.files.length) {\n      var options = this.fileup.options;\n      var multiple = $(this).is(\"[multiple]\");\n\n      if (!multiple) {\n        if (events.callEvent(this, 'remove', ['*', '1', this.files[0]])) {\n          $('#' + options.queueID).empty();\n          this.fileup.files = {};\n        } else {\n          $(this).val('');\n          return;\n        }\n      }\n\n      for (var i = 0; i < this.files.length; i++) {\n        var file = this.files[i];\n\n        if (options.sizeLimit > 0 && getFileSize(file) > options.sizeLimit) {\n          events.callEvent(this, 'error', ['size_limit', file]);\n          continue;\n        }\n\n        if (options.filesLimit > 0 && Object.keys(this.fileup.files).length >= options.filesLimit) {\n          events.callEvent(this, 'error', ['files_limit', file]);\n          break;\n        }\n\n        if (typeof this.accept === 'string') {\n          var accept = this.accept;\n\n          if (accept && /[^\\w]+/.test(accept)) {\n            var is_accept = false;\n            var types = accept.split(',');\n\n            if (types.length > 0) {\n              for (var t = 0; t < types.length; t++) {\n                types[t] = types[t].replace(/\\s/g, '');\n\n                if (new RegExp(types[t].replace('*', '.*')).test(file.type) || new RegExp(types[t].replace('.', '.*/')).test(file.type)) {\n                  is_accept = true;\n                  break;\n                }\n              }\n            }\n\n            if (!is_accept) {\n              events.callEvent(this, 'error', ['file_type', file]);\n              continue;\n            }\n          }\n        }\n\n        if (events.callEvent(this, 'select', [file]) === false) {\n          continue;\n        }\n\n        appendFile(file, this);\n      }\n\n      $(this).val('');\n    }\n  }\n  /**\n   * Append file in queue\n   * @param {File}   file\n   * @param {object} input\n   * @returns {bool|void}\n   */\n\n\n  function appendFile(file, input) {\n    var options = input.fileup.options;\n\n    if (window.XMLHttpRequest) {\n      var xhr = \"onload\" in new XMLHttpRequest() ? new XMLHttpRequest() : new XDomainRequest();\n    } else if (window.ActiveXObject) {\n      try {\n        xhr = new ActiveXObject(\"Msxml2.XMLHTTP\");\n      } catch (e) {\n        try {\n          xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        } catch (e) {\n          events.callEvent(input, 'error', ['old_browser', file]);\n          return false;\n        }\n      }\n    } else {\n      events.callEvent(input, 'error', ['old_browser', file]);\n      return false;\n    }\n\n    var tpl = options.templateFile;\n    tpl = tpl.replace(/\\[INPUT_ID\\]/g, options.inputID);\n    tpl = tpl.replace(/\\[FILE_NUM\\]/g, input.fileup.nextID);\n    tpl = tpl.replace(/\\[NAME\\]/g, getFileName(file));\n    tpl = tpl.replace(/\\[MTYPE\\]/g, file.type);\n    tpl = tpl.replace(/\\[SIZE\\]/g, getFileSize(file));\n    tpl = tpl.replace(/\\[SIZE_HUMAN\\]/g, formatHuman(getFileSize(file)));\n    tpl = tpl.replace(/\\[UPLOAD\\]/g, i18n[options.lang].upload);\n    tpl = tpl.replace(/\\[REMOVE\\]/g, i18n[options.lang].remove);\n    tpl = tpl.replace(/\\[ABORT\\]/g, i18n[options.lang].abort);\n    var fileContainer = {\n      xhr: xhr,\n      file: file,\n      file_number: input.fileup.nextID,\n      status: 'stand_by'\n    };\n    input.fileup.files[input.fileup.nextID] = fileContainer;\n    input.fileup.nextID++;\n\n    if (file.type === 'image/gif' || file.type === 'image/png' || file.type === 'image/jpg' || file.type === 'image/jpeg') {\n      if (typeof FileReader !== 'undefined') {\n        var reader = new FileReader();\n\n        reader.onload = function (ProgressEvent) {\n          tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, ProgressEvent.target.result);\n          tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-image');\n          $('#' + options.queueID).append(tpl);\n\n          if (options.autostart) {\n            uploadFile(input, fileContainer);\n          }\n        };\n\n        reader.readAsDataURL(file);\n      } else {\n        tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n        tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-image fileup-no-preview');\n        $('#' + options.queueID).append(tpl);\n\n        if (options.autostart) {\n          uploadFile(input, fileContainer);\n        }\n      }\n    } else {\n      tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n      tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-doc');\n      $('#' + options.queueID).append(tpl);\n\n      if (options.autostart) {\n        uploadFile(input, fileContainer);\n      }\n    }\n  }\n  /**\n   * Getter file size\n   * @param {File} file\n   * @returns {string}\n   */\n\n\n  function getFileName(file) {\n    return file.name || file.fileName;\n  }\n  /**\n   * Getter file size\n   * @param {File} file\n   * @returns {integer}\n   */\n\n\n  function getFileSize(file) {\n    return file.size || file.fileSize;\n  }\n  /**\n   * Formatting size\n   * @param {integer} bytes\n   * @returns {string}\n   */\n\n\n  function formatHuman(bytes) {\n    var result = '';\n\n    if (bytes >= 1073741824) {\n      result = (bytes / 1073741824).toFixed(2) + ' Gb';\n    } else if (bytes >= 1048576) {\n      result = (bytes / 1048576).toFixed(2) + ' Mb';\n    } else if (bytes >= 1024) {\n      result = (bytes / 1024).toFixed(2) + ' Kb';\n    } else if (bytes >= 0) {\n      result = bytes + ' bytes';\n    }\n\n    return result;\n  }\n  /**\n   * Upload file\n   * @param {object} input\n   * @param {object} fileContainer\n   * @returns {boolean}\n   */\n\n\n  function uploadFile(input, fileContainer) {\n    var options = input.fileup.options;\n    var file_number = fileContainer.file_number;\n    var file = fileContainer.file;\n    var xhr = fileContainer.xhr;\n\n    if (typeof options.timeout === 'number') {\n      xhr.timeout = options.timeout;\n    } // запрос начат\n\n\n    xhr.onloadstart = function () {\n      fileContainer.status = 'loading';\n      events.callEvent(input, 'start', [file_number, file]);\n    }; // браузер получил очередной пакет данных\n\n\n    xhr.upload.onprogress = function (ProgressEvent) {\n      events.callEvent(input, 'progress', [file_number, ProgressEvent, file]);\n    }; // запрос был успешно (без ошибок) завершён\n\n\n    xhr.onload = function () {\n      fileContainer.status = 'loaded';\n\n      if (xhr.status === 200) {\n        events.callEvent(input, 'success', [xhr.responseText, file_number, file]);\n      } else {\n        events.callEvent(input, 'error', ['bad_status', file, file_number, xhr.responseText]);\n      }\n    }; // запрос был завершён (успешно или неуспешно)\n\n\n    xhr.onloadend = function () {\n      events.callEvent(input, 'finish', [file_number, file]);\n    }; // запрос был отменён вызовом xhr.abort()\n\n\n    xhr.onabort = function () {\n      fileContainer.status = 'stand_by';\n      events.callEvent(input, 'abort', [file_number, file]);\n    }; // запрос был прекращён по таймауту\n\n\n    xhr.ontimeout = function () {\n      fileContainer.status = 'stand_by';\n      events.callEvent(input, 'timeout', [file_number, file]);\n    }; // произошла ошибка\n\n\n    xhr.onerror = function (event) {\n      fileContainer.status = 'stand_by';\n      events.callEvent(input, 'error', ['error_load', file, file_number, event]);\n    };\n\n    xhr.open(options.method, options.url, true);\n    xhr.setRequestHeader('Cache-Control', 'no-cache');\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    events.callEvent(input, 'beforeStart', [xhr, file_number, file]);\n\n    if (window.FormData !== undefined) {\n      var formData = new FormData();\n      formData.append(options.fieldName, file);\n\n      if (Object.keys(options.extraFields).length) {\n        $.each(options.extraFields, function (name, value) {\n          formData.append(name, value);\n        });\n      }\n\n      return xhr.send(formData);\n    } else {\n      // IE 8,9\n      return xhr.send(file);\n    }\n  }\n\n  var methods = {\n    upload: function (inputID, file_number) {\n      var input = document.getElementById(inputID);\n\n      if (input && input.type === 'file' && typeof input.fileup === 'object') {\n        if (file_number === '*') {\n          $.each(input.fileup.files, function (key, fileContainer) {\n            if (fileContainer.status === 'stand_by') {\n              uploadFile(input, fileContainer);\n            }\n          });\n        } else if (typeof input.fileup.files[file_number] === 'object') {\n          uploadFile(input, input.fileup.files[file_number]);\n        }\n      }\n    },\n    remove: function (inputID, file_number) {\n      var input = document.getElementById(inputID);\n\n      if (input && input.type === 'file' && typeof input.fileup === 'object') {\n        var options = input.fileup.options;\n        var total = Object.keys(input.fileup.files).length;\n\n        if (file_number === '*') {\n          if (events.callEvent(input, 'remove', ['*', total]) === false) {\n            return;\n          }\n\n          input.fileup.files = {};\n          $('[id^=fileup-' + inputID + '-]').fadeOut('fast', function () {\n            $(this).remove();\n          });\n        } else if (typeof input.fileup.files[file_number] === 'object') {\n          if (events.callEvent(input, 'remove', [input.fileup.files[file_number], total, file_number]) === false) {\n            return;\n          }\n\n          delete input.fileup.files[file_number];\n          $('#fileup-' + inputID + '-' + file_number).fadeOut('fast', function () {\n            $(this).remove();\n          });\n        }\n      }\n    },\n    removeEvents: function (inputID, name) {\n      var input = document.getElementById(inputID);\n\n      if (input && input.type === 'file' && typeof input.fileup === 'object') {\n        events.removeEvents(input, name);\n      }\n    },\n    abort: function (inputID, file_number) {\n      var input = document.getElementById(inputID);\n\n      if (input && input.type === 'file' && typeof input.fileup === 'object') {\n        if (file_number === '*') {\n          $.each(input.fileup.files, function (key, fileContainer) {\n            fileContainer.xhr.abort();\n          });\n        } else if (typeof input.fileup.files[file_number] === 'object') {\n          input.fileup.files[file_number].xhr.abort();\n        }\n      }\n    }\n  };\n  /**\n   * @param {object|string} param1 Options, inputID\n   * @param {string}        param2 Method name\n   * @param {string|int}    param3 File number\n   * @returns {object}\n   */\n\n  $.fileup = function (param1, param2, param3) {\n    if (typeof param1 === 'object') {\n      init(param1);\n      var input = document.getElementById(param1.inputID);\n\n      if (input && input.type === 'file' && typeof input.fileup === 'object') {\n        eventRegister.input = input;\n        return eventRegister;\n      }\n    } else if (typeof param1 === 'string' && typeof param2 === 'string' && typeof methods[param2] == 'function') {\n      methods[param2](param1, param3);\n    } else if (typeof param1 === 'string' && typeof param2 === 'undefined' && typeof param3 === 'undefined') {\n      var input = document.getElementById(param1);\n\n      if (input && input.type === 'file' && typeof input.fileup === 'object') {\n        eventRegister.input = input;\n        return eventRegister;\n      }\n    } else {\n      $.error('Unknown method ' + param1);\n    }\n  };\n})(jQuery);","map":{"version":3,"sources":["/Users/rudolfo/Documents/projects/NetGift/src/assets/js/fileup.js"],"names":["jQuery","$","default_options","url","window","location","pathname","search","inputID","queueID","dropzoneID","files","fieldName","extraFields","lang","sizeLimit","filesLimit","method","timeout","autostart","templateFile","onSelect","file","onRemove","file_number","total","onBeforeStart","xhr","onStart","onStartSystem","options","fileup","$file","find","hide","show","removeClass","text","onProgress","event","ProgressEvent","lengthComputable","percent","Math","ceil","loaded","css","onSuccess","response","onError","onErrorSystem","message","i18n","errorFilesLimit","alert","replace","size","formatHuman","errorSizeLimit","name","errorFileType","addClass","error","errorOldBrowser","onAbort","onAbortSystem","onTimeout","onTimeoutSystem","onFinish","onSuccessSystem","complete","onDragOver","stopPropagation","preventDefault","dataTransfer","dropEffect","onDragLeave","onDragEnd","onDragEnter","events","addEvent","input","callback","stack","push","removeEvents","callEvent","args","result","event_result","i","length","apply","eventRegister","select","remove","beforeStart","start","progress","success","abort","dragOver","dragLeave","dragEnd","dragEnter","ru","upload","en","ptbr","init","param1","extend","document","getElementById","type","dropZone","addEventListener","dropFiles","nextID","on","appendFiles","tpl","status","previewUrl","append","downloadUrl","$name","replaceWith","target","getFileSize","Object","keys","accept","test","is_accept","types","split","t","RegExp","appendFile","val","multiple","is","empty","XMLHttpRequest","XDomainRequest","ActiveXObject","e","getFileName","fileContainer","FileReader","reader","onload","uploadFile","readAsDataURL","fileName","fileSize","bytes","toFixed","onloadstart","onprogress","responseText","onloadend","onabort","ontimeout","onerror","open","setRequestHeader","FormData","undefined","formData","each","value","send","methods","key","fadeOut","param2","param3"],"mappings":"AAAA;AAEA,OAAOA,MAAP,MAAmB,QAAnB;;AAEA,CAAC,UAASC,CAAT,EAAW;AACR,MAAIC,eAAe,GAAG;AAClBC,IAAAA,GAAG,EAAEC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,GAA2BF,MAAM,CAACC,QAAP,CAAgBE,MAD9B;AAElBC,IAAAA,OAAO,EAAE,EAFS;AAGlBC,IAAAA,OAAO,EAAE,EAHS;AAIlBC,IAAAA,UAAU,EAAE,EAJM;AAKlBC,IAAAA,KAAK,EAAE,EALW;AAMlBC,IAAAA,SAAS,EAAE,UANO;AAOlBC,IAAAA,WAAW,EAAE,EAPK;AAQlBC,IAAAA,IAAI,EAAE,IARY;AASlBC,IAAAA,SAAS,EAAE,CATO;AAUlBC,IAAAA,UAAU,EAAE,CAVM;AAWlBC,IAAAA,MAAM,EAAE,MAXU;AAYlBC,IAAAA,OAAO,EAAE,IAZS;AAalBC,IAAAA,SAAS,EAAE,KAbO;AAclBC,IAAAA,YAAY,EAAE,uEACI,8BADJ,GAEQ,yCAFR,GAGI,QAHJ,GAII,gCAJJ,GAKQ,kCALR,GAMc,yFANd,GAOQ,QAPR,GAQQ,+BARR,GASY,yIATZ,GAUY,6GAVZ,GAWY,+HAXZ,GAYQ,QAZR,GAaQ,mCAbR,GAcQ,+BAdR,GAec,yCAfd,GAgBQ,QAhBR,GAiBI,QAjBJ,GAkBI,kCAlBJ,GAmBA,QAjCI;AAkClBC,IAAAA,QAAQ,EAAE,UAASC,IAAT,EAAe,CAAE,CAlCT;AAmClBC,IAAAA,QAAQ,EAAE,UAASC,WAAT,EAAsBC,KAAtB,EAA6BH,IAA7B,EAAmC,CAAE,CAnC7B;AAoClBI,IAAAA,aAAa,EAAE,UAASF,WAAT,EAAsBG,GAAtB,EAA2BL,IAA3B,EAAiC,CAAE,CApChC;AAqClBM,IAAAA,OAAO,EAAE,UAASJ,WAAT,EAAsBF,IAAtB,EAA4B,CAAE,CArCrB;AAsClBO,IAAAA,aAAa,EAAE,UAASL,WAAT,EAAsBF,IAAtB,EAA4B;AACvC,UAAIQ,OAAO,GAAG,KAAKC,MAAL,CAAYD,OAA1B;AACA,UAAIE,KAAK,GAAK/B,CAAC,CAAC,aAAa6B,OAAO,CAACtB,OAArB,GAA+B,GAA/B,GAAqCgB,WAAtC,CAAf;AACAQ,MAAAA,KAAK,CAACC,IAAN,CAAW,iCAAX,EAA8CC,IAA9C;AACAF,MAAAA,KAAK,CAACC,IAAN,CAAW,gCAAX,EAA6CE,IAA7C;AACAH,MAAAA,KAAK,CAACC,IAAN,CAAW,gBAAX,EACKG,WADL,CACiB,cADjB,EAEKA,WAFL,CAEiB,gBAFjB,EAGKC,IAHL,CAGU,EAHV;AAIH,KA/CiB;AAgDlBC,IAAAA,UAAU,EAAE,UAASC,KAAT,EAAgBf,WAAhB,EAA6BgB,aAA7B,EAA4ClB,IAA5C,EAAkD;AAC1D,UAAIiB,KAAK,CAACE,gBAAV,EAA4B;AACxB,YAAIX,OAAO,GAAG,KAAKC,MAAL,CAAYD,OAA1B;AACA,YAAIY,OAAO,GAAGC,IAAI,CAACC,IAAL,CAAUJ,aAAa,CAACK,MAAd,GAAuBL,aAAa,CAACf,KAArC,GAA6C,GAAvD,CAAd;AACAxB,QAAAA,CAAC,CAAC,aAAa6B,OAAO,CAACtB,OAArB,GAA+B,GAA/B,GAAqCgB,WAArC,GAAmD,uBAApD,CAAD,CAA8EsB,GAA9E,CAAkF,OAAlF,EAA2FJ,OAAO,GAAG,GAArG;AACH;AACJ,KAtDiB;AAuDlBK,IAAAA,SAAS,EAAE,UAASvB,WAAT,EAAsBwB,QAAtB,EAAgC1B,IAAhC,EAAsC,CAAE,CAvDjC;AAwDlB2B,IAAAA,OAAO,EAAE,UAASV,KAAT,EAAgBjB,IAAhB,EAAsBE,WAAtB,EAAmCwB,QAAnC,EAA6C,CAAE,CAxDtC;AAyDlBE,IAAAA,aAAa,EAAE,UAASX,KAAT,EAAgBjB,IAAhB,EAAsBE,WAAtB,EAAmC;AAC9C,UAAIM,OAAO,GAAG,KAAKC,MAAL,CAAYD,OAA1B;;AACA,cAAOS,KAAP;AACI,aAAK,aAAL;AACI,cAAIY,OAAO,GAAGC,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmBuC,eAAjC;AACAC,UAAAA,KAAK,CAACH,OAAO,CAACI,OAAR,CAAgB,eAAhB,EAAiCzB,OAAO,CAACd,UAAzC,CAAD,CAAL;AACA;;AACJ,aAAK,YAAL;AACI,cAAIwC,IAAI,GAAMC,WAAW,CAAC3B,OAAO,CAACf,SAAT,CAAzB;AACA,cAAIoC,OAAO,GAAGC,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmB4C,cAAjC;AACAP,UAAAA,OAAO,GAAGA,OAAO,CAACI,OAAR,CAAgB,cAAhB,EAAgCC,IAAhC,CAAV;AACAL,UAAAA,OAAO,GAAGA,OAAO,CAACI,OAAR,CAAgB,aAAhB,EAA+BjC,IAAI,CAACqC,IAApC,CAAV;AACAL,UAAAA,KAAK,CAACH,OAAD,CAAL;AACA;;AACJ,aAAK,WAAL;AACI,cAAIA,OAAO,GAAGC,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmB8C,aAAjC;AACAN,UAAAA,KAAK,CAACH,OAAO,CAACI,OAAR,CAAgB,aAAhB,EAA+BjC,IAAI,CAACqC,IAApC,CAAD,CAAL;AACA;;AACJ,aAAK,YAAL;AACA,aAAK,YAAL;AACI,cAAI3B,KAAK,GAAG/B,CAAC,CAAC,aAAa6B,OAAO,CAACtB,OAArB,GAA+B,GAA/B,GAAqCgB,WAAtC,CAAb;AACAQ,UAAAA,KAAK,CAACC,IAAN,CAAW,gCAAX,EAA6CC,IAA7C;AACAF,UAAAA,KAAK,CAACC,IAAN,CAAW,iCAAX,EAA8CE,IAA9C;AACAH,UAAAA,KAAK,CAACC,IAAN,CAAW,gBAAX,EACK4B,QADL,CACc,cADd,EAEKxB,IAFL,CAEUe,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmBgD,KAF7B;AAGA;;AACJ,aAAK,aAAL;AACIR,UAAAA,KAAK,CAACF,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmBiD,eAApB,CAAL;AACA;AA3BR;AA6BH,KAxFiB;AAyFlBC,IAAAA,OAAO,EAAE,UAASxC,WAAT,EAAsBF,IAAtB,EAA4B,CAAE,CAzFrB;AA0FlB2C,IAAAA,aAAa,EAAE,UAASzC,WAAT,EAAsBF,IAAtB,EAA4B;AACvC,UAAIQ,OAAO,GAAG,KAAKC,MAAL,CAAYD,OAA1B;AACA,UAAIE,KAAK,GAAK/B,CAAC,CAAC,aAAa6B,OAAO,CAACtB,OAArB,GAA+B,GAA/B,GAAqCgB,WAAtC,CAAf;AACAQ,MAAAA,KAAK,CAACC,IAAN,CAAW,gCAAX,EAA6CC,IAA7C;AACAF,MAAAA,KAAK,CAACC,IAAN,CAAW,iCAAX,EAA8CE,IAA9C;AACAH,MAAAA,KAAK,CAACC,IAAN,CAAW,gBAAX,EACKG,WADL,CACiB,cADjB,EAEKA,WAFL,CAEiB,gBAFjB,EAGKC,IAHL,CAGU,EAHV;AAIH,KAnGiB;AAoGlB6B,IAAAA,SAAS,EAAE,UAAS1C,WAAT,EAAsBF,IAAtB,EAA4B,CAAE,CApGvB;AAqGlB6C,IAAAA,eAAe,EAAE,UAAS3C,WAAT,EAAsBF,IAAtB,EAA4B;AACzC,UAAIQ,OAAO,GAAG,KAAKC,MAAL,CAAYD,OAA1B;AACA,UAAIE,KAAK,GAAK/B,CAAC,CAAC,aAAa6B,OAAO,CAACtB,OAArB,GAA+B,GAA/B,GAAqCgB,WAAtC,CAAf;AACAQ,MAAAA,KAAK,CAACC,IAAN,CAAW,gCAAX,EAA6CC,IAA7C;AACAF,MAAAA,KAAK,CAACC,IAAN,CAAW,iCAAX,EAA8CE,IAA9C;AACAH,MAAAA,KAAK,CAACC,IAAN,CAAW,gBAAX,EACKG,WADL,CACiB,cADjB,EAEKA,WAFL,CAEiB,gBAFjB,EAGKC,IAHL,CAGU,EAHV;AAIH,KA9GiB;AA+GlB+B,IAAAA,QAAQ,EAAE,UAAS5C,WAAT,EAAsBF,IAAtB,EAA4B,CAAE,CA/GtB;AAgHlB+C,IAAAA,eAAe,EAAE,UAASrB,QAAT,EAAmBxB,WAAnB,EAAgCF,IAAhC,EAAsC;AACnD,UAAIQ,OAAO,GAAG,KAAKC,MAAL,CAAYD,OAA1B;AACA,UAAIE,KAAK,GAAK/B,CAAC,CAAC,aAAa6B,OAAO,CAACtB,OAArB,GAA+B,GAA/B,GAAqCgB,WAAtC,CAAf;AACAQ,MAAAA,KAAK,CAACC,IAAN,CAAW,gCAAX,EAA6CC,IAA7C;AACAF,MAAAA,KAAK,CAACC,IAAN,CAAW,iCAAX,EAA8CC,IAA9C;AACAF,MAAAA,KAAK,CAACC,IAAN,CAAW,gBAAX,EACKG,WADL,CACiB,cADjB,EAEKyB,QAFL,CAEc,gBAFd,EAGKxB,IAHL,CAGUe,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmBwD,QAH7B;AAIH,KAzHiB;AA0HlBC,IAAAA,UAAU,EAAE,UAAShC,KAAT,EAAgB;AACxBA,MAAAA,KAAK,CAACiC,eAAN;AACAjC,MAAAA,KAAK,CAACkC,cAAN;AACAlC,MAAAA,KAAK,CAACmC,YAAN,CAAmBC,UAAnB,GAAgC,MAAhC;AACH,KA9HiB;AA+HlBC,IAAAA,WAAW,EAAE,UAASrC,KAAT,EAAgB,CAAE,CA/Hb;AAgIlBsC,IAAAA,SAAS,EAAE,UAAStC,KAAT,EAAgB,CAAE,CAhIX;AAiIlBuC,IAAAA,WAAW,EAAE,UAASvC,KAAT,EAAgB;AACzBA,MAAAA,KAAK,CAACiC,eAAN;AACAjC,MAAAA,KAAK,CAACkC,cAAN;AACAlC,MAAAA,KAAK,CAACmC,YAAN,CAAmBC,UAAnB,GAAgC,MAAhC;AACH;AArIiB,GAAtB;AAyIA,MAAII,MAAM,GAAG;AACTC,IAAAA,QAAQ,EAAG,UAASC,KAAT,EAAgBtB,IAAhB,EAAsBuB,QAAtB,EAAgC;AACvC,UAAIC,KAAK,GAAGF,KAAK,CAAClD,MAAN,CAAagD,MAAb,CAAoBpB,IAApB,KAA6B,EAAzC;AACAwB,MAAAA,KAAK,CAACC,IAAN,CAAWF,QAAX;AACAD,MAAAA,KAAK,CAAClD,MAAN,CAAagD,MAAb,CAAoBpB,IAApB,IAA4BwB,KAA5B;AACH,KALQ;AAMTE,IAAAA,YAAY,EAAG,UAASJ,KAAT,EAAgBtB,IAAhB,EAAsB;AACjCsB,MAAAA,KAAK,CAAClD,MAAN,CAAagD,MAAb,CAAoBpB,IAApB,IAA4B,EAA5B;AACH,KARQ;AAST2B,IAAAA,SAAS,EAAG,UAASL,KAAT,EAAgBtB,IAAhB,EAAsB4B,IAAtB,EAA4B;AACpC,UAAIC,MAAM,GAAG,IAAb;AAAA,UACIC,YADJ;;AAGA,UAAIR,KAAK,CAAClD,MAAN,CAAagD,MAAb,CAAoBpB,IAApB,CAAJ,EAA+B;AAC3B,aAAK,IAAI+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,KAAK,CAAClD,MAAN,CAAagD,MAAb,CAAoBpB,IAApB,EAA0BgC,MAA9C,EAAsDD,CAAC,EAAvD,EAA2D;AACvD,cAAI,OAAOT,KAAK,CAAClD,MAAN,CAAagD,MAAb,CAAoBpB,IAApB,EAA0B+B,CAA1B,CAAP,KAAwC,UAA5C,EAAwD;AACpD,gBAAIH,IAAJ,EAAU;AACNE,cAAAA,YAAY,GAAGR,KAAK,CAAClD,MAAN,CAAagD,MAAb,CAAoBpB,IAApB,EAA0B+B,CAA1B,EAA6BE,KAA7B,CAAmCX,KAAnC,EAA0CM,IAA1C,CAAf;;AACA,kBAAIC,MAAM,IAAIC,YAAY,KAAK,KAA/B,EAAsC;AAClCD,gBAAAA,MAAM,GAAG,KAAT;AACH;AACJ,aALD,MAKO;AACHC,cAAAA,YAAY,GAAGR,KAAK,CAAClD,MAAN,CAAagD,MAAb,CAAoBpB,IAApB,EAA0B+B,CAA1B,EAA6BE,KAA7B,CAAmCX,KAAnC,CAAf;;AACA,kBAAIO,MAAM,IAAIC,YAAY,KAAK,KAA/B,EAAsC;AAClCD,gBAAAA,MAAM,GAAG,KAAT;AACH;AACJ;AAEJ;AACJ;AACJ;;AAED,aAAOA,MAAP;AACH;AAjCQ,GAAb;AAqCA,MAAIK,aAAa,GAAG;AAChBZ,IAAAA,KAAK,EAAS,EADE;AAEhBa,IAAAA,MAAM,EAAQ,UAASZ,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,QAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KAFvG;AAGhBE,IAAAA,MAAM,EAAQ,UAASb,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,QAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KAHvG;AAIhBG,IAAAA,WAAW,EAAG,UAASd,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,aAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KAJvG;AAKhBI,IAAAA,KAAK,EAAS,UAASf,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,OAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KALvG;AAMhBK,IAAAA,QAAQ,EAAM,UAAShB,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,UAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KANvG;AAOhBM,IAAAA,OAAO,EAAO,UAASjB,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,SAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KAPvG;AAQhB/B,IAAAA,KAAK,EAAS,UAASoB,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,OAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KARvG;AAShBO,IAAAA,KAAK,EAAS,UAASlB,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,OAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KATvG;AAUhB3E,IAAAA,OAAO,EAAO,UAASgE,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,SAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KAVvG;AAWhBQ,IAAAA,QAAQ,EAAM,UAASnB,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,UAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KAXvG;AAYhBS,IAAAA,SAAS,EAAK,UAASpB,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,WAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KAZvG;AAahBU,IAAAA,OAAO,EAAO,UAASrB,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,SAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB,KAbvG;AAchBW,IAAAA,SAAS,EAAK,UAAStB,QAAT,EAAmB;AAACH,MAAAA,MAAM,CAACC,QAAP,CAAgBa,aAAa,CAACZ,KAA9B,EAAqC,WAArC,EAAoDC,QAApD;AAA+D,aAAOW,aAAP;AAAsB;AAdvG,GAApB;AAkBA,MAAIzC,IAAI,GAAG;AACPqD,IAAAA,EAAE,EAAE;AACAC,MAAAA,MAAM,EAAE,WADR;AAEAN,MAAAA,KAAK,EAAE,YAFP;AAGAL,MAAAA,MAAM,EAAE,SAHR;AAIAzB,MAAAA,QAAQ,EAAE,QAJV;AAKAR,MAAAA,KAAK,EAAE,QALP;AAMAT,MAAAA,eAAe,EAAE,4DANjB;AAOAK,MAAAA,cAAc,EAAE,6DAPhB;AAQAE,MAAAA,aAAa,EAAE,yCARf;AASAG,MAAAA,eAAe,EAAE;AATjB,KADG;AAYP4C,IAAAA,EAAE,EAAE;AACAD,MAAAA,MAAM,EAAE,QADR;AAEAN,MAAAA,KAAK,EAAE,OAFP;AAGAL,MAAAA,MAAM,EAAE,QAHR;AAIAzB,MAAAA,QAAQ,EAAE,UAJV;AAKAR,MAAAA,KAAK,EAAE,OALP;AAMAT,MAAAA,eAAe,EAAE,+DANjB;AAOAK,MAAAA,cAAc,EAAE,wDAPhB;AAQAE,MAAAA,aAAa,EAAE,gCARf;AASAG,MAAAA,eAAe,EAAE;AATjB,KAZG;AAuBP6C,IAAAA,IAAI,EAAE;AACFF,MAAAA,MAAM,EAAE,eADN;AAEFN,MAAAA,KAAK,EAAE,UAFL;AAGFL,MAAAA,MAAM,EAAE,SAHN;AAIFzB,MAAAA,QAAQ,EAAE,WAJR;AAKFR,MAAAA,KAAK,EAAE,MALL;AAMFT,MAAAA,eAAe,EAAE,+BANf;AAOFK,MAAAA,cAAc,EAAE,kEAPd;AAQFE,MAAAA,aAAa,EAAE,mCARb;AASFG,MAAAA,eAAe,EAAE;AATf;AAvBC,GAAX;AAqCA;;;;;AAIA,WAAS8C,IAAT,CAAcC,MAAd,EAAsB;AAElB,QAAIhF,OAAO,GAAG7B,CAAC,CAAC8G,MAAF,CAAS,KAAT,EAAgB7G,eAAhB,EAAiC4G,MAAjC,CAAd;AACA,QAAI7B,KAAK,GAAK+B,QAAQ,CAACC,cAAT,CAAwBnF,OAAO,CAACtB,OAAhC,CAAd;;AAEA,QAAIyE,KAAK,IAAIA,KAAK,CAACiC,IAAN,KAAe,MAA5B,EAAoC;AAChC,UAAIpF,OAAO,CAACpB,UAAZ,EAAwB;AACpB,YAAIyG,QAAQ,GAAGH,QAAQ,CAACC,cAAT,CAAwBnF,OAAO,CAACpB,UAAhC,CAAf;;AACA,YAAIyG,QAAJ,EAAc;AACVA,UAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAuC,UAAS7E,KAAT,EAAgB;AACnDwC,YAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,UAAxB,EAAoC,CAAC1C,KAAD,CAApC;AACH,WAFD;AAGA4E,UAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuC,UAAS7E,KAAT,EAAgB;AACnDwC,YAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,WAAxB,EAAqC,CAAC1C,KAAD,CAArC;AACH,WAFD;AAGA4E,UAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuC,UAAS7E,KAAT,EAAgB;AACnDwC,YAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,WAAxB,EAAqC,CAAC1C,KAAD,CAArC;AACH,WAFD;AAGA4E,UAAAA,QAAQ,CAACC,gBAAT,CAA0B,MAA1B,EAAuCC,SAAvC;AACAF,UAAAA,QAAQ,CAACpF,MAAT,GAAkB;AACdkD,YAAAA,KAAK,EAAEA;AADO,WAAlB;AAGH;AACJ;;AAEDA,MAAAA,KAAK,CAAClD,MAAN,GAAe;AACXpB,QAAAA,KAAK,EAAE,EADI;AAEX2G,QAAAA,MAAM,EAAE,CAFG;AAGXxF,QAAAA,OAAO,EAAEA,OAHE;AAIXiD,QAAAA,MAAM,EAAE;AAJG,OAAf;AAOAA,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,QAAvB,EAAsCnD,OAAO,CAACT,QAA9C;AACA0D,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,QAAvB,EAAsCnD,OAAO,CAACP,QAA9C;AACAwD,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,aAAvB,EAAsCnD,OAAO,CAACJ,aAA9C;AACAqD,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,OAAvB,EAAsCnD,OAAO,CAACD,aAA9C;AACAkD,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,OAAvB,EAAsCnD,OAAO,CAACF,OAA9C;AACAmD,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,UAAvB,EAAsCnD,OAAO,CAACQ,UAA9C;AACAyC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,SAAvB,EAAsCnD,OAAO,CAACuC,eAA9C;AACAU,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,SAAvB,EAAsCnD,OAAO,CAACiB,SAA9C;AACAgC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,OAAvB,EAAsCnD,OAAO,CAACoB,aAA9C;AACA6B,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,OAAvB,EAAsCnD,OAAO,CAACmB,OAA9C;AACA8B,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,OAAvB,EAAsCnD,OAAO,CAACmC,aAA9C;AACAc,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,OAAvB,EAAsCnD,OAAO,CAACkC,OAA9C;AACAe,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,SAAvB,EAAsCnD,OAAO,CAACqC,eAA9C;AACAY,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,SAAvB,EAAsCnD,OAAO,CAACoC,SAA9C;AACAa,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,UAAvB,EAAsCnD,OAAO,CAACyC,UAA9C;AACAQ,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,WAAvB,EAAsCnD,OAAO,CAAC8C,WAA9C;AACAG,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,SAAvB,EAAsCnD,OAAO,CAAC+C,SAA9C;AACAE,MAAAA,MAAM,CAACC,QAAP,CAAgBC,KAAhB,EAAuB,WAAvB,EAAsCnD,OAAO,CAACgD,WAA9C;AAEA7E,MAAAA,CAAC,CAACgF,KAAD,CAAD,CAASsC,EAAT,CAAY,QAAZ,EAAsBC,WAAtB;;AAGA,UAAI1F,OAAO,CAACnB,KAAR,CAAcgF,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,aAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5D,OAAO,CAACnB,KAAR,CAAcgF,MAAlC,EAA0CD,CAAC,EAA3C,EAA+C;AAE3C,cAAI+B,GAAG,GAAG3F,OAAO,CAACV,YAAlB;AACAqG,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,eAAZ,EAA+BzB,OAAO,CAACtB,OAAvC,CAAN;AACAiH,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,eAAZ,EAA+B0B,KAAK,CAAClD,MAAN,CAAauF,MAA5C,CAAN;AACAG,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,WAAZ,EAA+BzB,OAAO,CAACnB,KAAR,CAAc+E,CAAd,EAAiB/B,IAAhD,CAAN;AACA8D,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,iBAAZ,EAA+BE,WAAW,CAAC3B,OAAO,CAACnB,KAAR,CAAc+E,CAAd,EAAiBlC,IAAlB,CAA1C,CAAN;AACAiE,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,aAAZ,EAA+BH,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmB4F,MAAlD,CAAN;AACAe,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,aAAZ,EAA+BH,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmBiF,MAAlD,CAAN;AACA0B,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,YAAZ,EAA+BH,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmBsF,KAAlD,CAAN;AAEAnB,UAAAA,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBsE,KAAK,CAAClD,MAAN,CAAauF,MAAhC,IAA0C;AACtC3F,YAAAA,GAAG,EAAE,IADiC;AAEtCL,YAAAA,IAAI,EAAEQ,OAAO,CAACnB,KAAR,CAAc+E,CAAd,CAFgC;AAGtClE,YAAAA,WAAW,EAAEyD,KAAK,CAAClD,MAAN,CAAauF,MAHY;AAItCI,YAAAA,MAAM,EAAE;AAJ8B,WAA1C;;AAOA,cAAI5F,OAAO,CAACnB,KAAR,CAAc+E,CAAd,EAAiBiC,UAArB,EAAiC;AAC7BF,YAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,kBAAZ,EAAgCzB,OAAO,CAACnB,KAAR,CAAc+E,CAAd,EAAiBiC,UAAjD,CAAN;AACAF,YAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,WAAZ,EAAgC,cAAhC,CAAN;AAEH,WAJD,MAIO;AACHkE,YAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,kBAAZ,EAAgC,EAAhC,CAAN;AACAkE,YAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,WAAZ,EAAgC,YAAhC,CAAN;AACH;;AAEDtD,UAAAA,CAAC,CAAC,MAAM6B,OAAO,CAACrB,OAAf,CAAD,CAAyBmH,MAAzB,CAAgCH,GAAhC,EACKxF,IADL,CACU,iEADV,EAC6E8D,MAD7E;;AAIA,cAAIjE,OAAO,CAACnB,KAAR,CAAc+E,CAAd,EAAiBmC,WAArB,EAAkC;AAC9B,gBAAIC,KAAK,GAAG7H,CAAC,CAAC,aAAa6B,OAAO,CAACtB,OAArB,GAA+B,GAA/B,GAAqCyE,KAAK,CAAClD,MAAN,CAAauF,MAAnD,CAAD,CAA4DrF,IAA5D,CAAiE,cAAjE,CAAZ;;AACA,gBAAI6F,KAAK,CAAC,CAAD,CAAT,EAAc;AACVA,cAAAA,KAAK,CAACC,WAAN,CAAkB,cAAcjG,OAAO,CAACnB,KAAR,CAAc+E,CAAd,EAAiBmC,WAA/B,GAA6C,wBAA7C,GACG,YADH,GACkB/F,OAAO,CAACnB,KAAR,CAAc+E,CAAd,EAAiB/B,IADnC,GAC0C,IAD1C,GACiD7B,OAAO,CAACnB,KAAR,CAAc+E,CAAd,EAAiB/B,IADlE,GACyE,MAD3F;AAEH;AACJ;;AAEDsB,UAAAA,KAAK,CAAClD,MAAN,CAAauF,MAAb;AACH;AACJ;AACJ;AACJ;AAGD;;;;;;AAIA,WAASD,SAAT,CAAmB9E,KAAnB,EAA0B;AACtBA,IAAAA,KAAK,CAACkC,cAAN;AACAlC,IAAAA,KAAK,CAACiC,eAAN;AAEA,QAAIS,KAAK,GAAK1C,KAAK,CAACyF,MAAN,CAAajG,MAAb,CAAoBkD,KAAlC;AACA,QAAInD,OAAO,GAAGmD,KAAK,CAAClD,MAAN,CAAaD,OAA3B;AACA,QAAInB,KAAK,GAAK4B,KAAK,CAACyF,MAAN,CAAarH,KAAb,IAAsB4B,KAAK,CAACmC,YAAN,CAAmB/D,KAAvD;;AAEA,QAAIA,KAAK,CAACgF,MAAV,EAAkB;AACd,WAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/E,KAAK,CAACgF,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnC,YAAIpE,IAAI,GAAGX,KAAK,CAAC+E,CAAD,CAAhB;;AAEA,YAAI5D,OAAO,CAACf,SAAR,GAAoB,CAApB,IAAyBkH,WAAW,CAAC3G,IAAD,CAAX,GAAoBQ,OAAO,CAACf,SAAzD,EAAoE;AAChEgE,UAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAAC,YAAD,EAAe3D,IAAf,CAAjC;AACA;AACH;;AACD,YAAIQ,OAAO,CAACd,UAAR,GAAqB,CAArB,IAA0BkH,MAAM,CAACC,IAAP,CAAYxH,KAAZ,EAAmBgF,MAAnB,IAA6B7D,OAAO,CAACd,UAAnE,EAA+E;AAC3E+D,UAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAAC,aAAD,EAAgB3D,IAAhB,CAAjC;AACA;AACH;;AACD,YAAI,OAAO2D,KAAK,CAACmD,MAAb,KAAwB,QAA5B,EAAsC;AAClC,cAAIA,MAAM,GAAGnD,KAAK,CAACmD,MAAnB;;AACA,cAAIA,MAAM,IAAI,SAASC,IAAT,CAAcD,MAAd,CAAd,EAAqC;AACjC,gBAAIE,SAAS,GAAG,KAAhB;AACA,gBAAIC,KAAK,GAAGH,MAAM,CAACI,KAAP,CAAa,GAAb,CAAZ;;AACA,gBAAID,KAAK,CAAC5C,MAAN,GAAe,CAAnB,EAAsB;AAClB,mBAAK,IAAI8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAAC5C,MAA1B,EAAkC8C,CAAC,EAAnC,EAAuC;AACnCF,gBAAAA,KAAK,CAACE,CAAD,CAAL,GAAWF,KAAK,CAACE,CAAD,CAAL,CAASlF,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CAAX;;AACA,oBAAI,IAAImF,MAAJ,CAAWH,KAAK,CAACE,CAAD,CAAL,CAASlF,OAAT,CAAiB,GAAjB,EAAsB,IAAtB,CAAX,EAAwC8E,IAAxC,CAA6C/G,IAAI,CAAC4F,IAAlD,KACA,IAAIwB,MAAJ,CAAWH,KAAK,CAACE,CAAD,CAAL,CAASlF,OAAT,CAAiB,GAAjB,EAAsB,KAAtB,CAAX,EAAyC8E,IAAzC,CAA8C/G,IAAI,CAAC4F,IAAnD,CADJ,EAEE;AACEoB,kBAAAA,SAAS,GAAG,IAAZ;AACA;AACH;AACJ;AACJ;;AACD,gBAAK,CAAEA,SAAP,EAAkB;AACdvD,cAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAAC,WAAD,EAAc3D,IAAd,CAAjC;AACA;AACH;AACJ;AACJ;;AAED,YAAIyD,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,QAAxB,EAAkC,CAAC3D,IAAD,CAAlC,MAA8C,KAAlD,EAAyD;AACrD;AACH;;AAEDqH,QAAAA,UAAU,CAACrH,IAAD,EAAO2D,KAAP,CAAV;AACH;;AAEDhF,MAAAA,CAAC,CAACgF,KAAD,CAAD,CAAS2D,GAAT,CAAa,EAAb;AACH;;AAED7D,IAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,SAAxB,EAAmC,CAAC1C,KAAD,CAAnC;AACH;AAGD;;;;;AAGA,WAASiF,WAAT,GAAuB;AAEnB,QAAI,KAAK7G,KAAL,CAAWgF,MAAf,EAAuB;AACnB,UAAI7D,OAAO,GAAI,KAAKC,MAAL,CAAYD,OAA3B;AACA,UAAI+G,QAAQ,GAAG5I,CAAC,CAAC,IAAD,CAAD,CAAQ6I,EAAR,CAAW,YAAX,CAAf;;AAEA,UAAK,CAAED,QAAP,EAAiB;AACb,YAAI9D,MAAM,CAACO,SAAP,CAAiB,IAAjB,EAAuB,QAAvB,EAAiC,CAAC,GAAD,EAAM,GAAN,EAAW,KAAK3E,KAAL,CAAW,CAAX,CAAX,CAAjC,CAAJ,EAAiE;AAC7DV,UAAAA,CAAC,CAAC,MAAM6B,OAAO,CAACrB,OAAf,CAAD,CAAyBsI,KAAzB;AACA,eAAKhH,MAAL,CAAYpB,KAAZ,GAAoB,EAApB;AACH,SAHD,MAGO;AACHV,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ2I,GAAR,CAAY,EAAZ;AACA;AACH;AACJ;;AAED,WAAK,IAAIlD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK/E,KAAL,CAAWgF,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxC,YAAIpE,IAAI,GAAG,KAAKX,KAAL,CAAW+E,CAAX,CAAX;;AAEA,YAAI5D,OAAO,CAACf,SAAR,GAAoB,CAApB,IAAyBkH,WAAW,CAAC3G,IAAD,CAAX,GAAoBQ,OAAO,CAACf,SAAzD,EAAoE;AAChEgE,UAAAA,MAAM,CAACO,SAAP,CAAiB,IAAjB,EAAuB,OAAvB,EAAgC,CAAC,YAAD,EAAehE,IAAf,CAAhC;AACA;AACH;;AACD,YAAIQ,OAAO,CAACd,UAAR,GAAqB,CAArB,IAA0BkH,MAAM,CAACC,IAAP,CAAY,KAAKpG,MAAL,CAAYpB,KAAxB,EAA+BgF,MAA/B,IAAyC7D,OAAO,CAACd,UAA/E,EAA2F;AACvF+D,UAAAA,MAAM,CAACO,SAAP,CAAiB,IAAjB,EAAuB,OAAvB,EAAgC,CAAC,aAAD,EAAgBhE,IAAhB,CAAhC;AACA;AACH;;AACD,YAAI,OAAO,KAAK8G,MAAZ,KAAuB,QAA3B,EAAqC;AACjC,cAAIA,MAAM,GAAG,KAAKA,MAAlB;;AACA,cAAIA,MAAM,IAAI,SAASC,IAAT,CAAcD,MAAd,CAAd,EAAqC;AACjC,gBAAIE,SAAS,GAAG,KAAhB;AACA,gBAAIC,KAAK,GAAGH,MAAM,CAACI,KAAP,CAAa,GAAb,CAAZ;;AACA,gBAAID,KAAK,CAAC5C,MAAN,GAAe,CAAnB,EAAsB;AAClB,mBAAK,IAAI8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAAC5C,MAA1B,EAAkC8C,CAAC,EAAnC,EAAuC;AACnCF,gBAAAA,KAAK,CAACE,CAAD,CAAL,GAAWF,KAAK,CAACE,CAAD,CAAL,CAASlF,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CAAX;;AACA,oBAAI,IAAImF,MAAJ,CAAWH,KAAK,CAACE,CAAD,CAAL,CAASlF,OAAT,CAAiB,GAAjB,EAAsB,IAAtB,CAAX,EAAwC8E,IAAxC,CAA6C/G,IAAI,CAAC4F,IAAlD,KACA,IAAIwB,MAAJ,CAAWH,KAAK,CAACE,CAAD,CAAL,CAASlF,OAAT,CAAiB,GAAjB,EAAsB,KAAtB,CAAX,EAAyC8E,IAAzC,CAA8C/G,IAAI,CAAC4F,IAAnD,CADJ,EAEE;AACEoB,kBAAAA,SAAS,GAAG,IAAZ;AACA;AACH;AACJ;AACJ;;AACD,gBAAK,CAAEA,SAAP,EAAkB;AACdvD,cAAAA,MAAM,CAACO,SAAP,CAAiB,IAAjB,EAAuB,OAAvB,EAAgC,CAAC,WAAD,EAAchE,IAAd,CAAhC;AACA;AACH;AACJ;AACJ;;AACD,YAAIyD,MAAM,CAACO,SAAP,CAAiB,IAAjB,EAAuB,QAAvB,EAAiC,CAAChE,IAAD,CAAjC,MAA6C,KAAjD,EAAwD;AACpD;AACH;;AAEDqH,QAAAA,UAAU,CAACrH,IAAD,EAAO,IAAP,CAAV;AACH;;AAEDrB,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ2I,GAAR,CAAY,EAAZ;AACH;AACJ;AAGD;;;;;;;;AAMA,WAASD,UAAT,CAAoBrH,IAApB,EAA0B2D,KAA1B,EAAiC;AAE7B,QAAInD,OAAO,GAAGmD,KAAK,CAAClD,MAAN,CAAaD,OAA3B;;AAEA,QAAI1B,MAAM,CAAC4I,cAAX,EAA2B;AACvB,UAAIrH,GAAG,GAAI,YAAY,IAAIqH,cAAJ,EAAb,GAAqC,IAAIA,cAAJ,EAArC,GAA0D,IAAIC,cAAJ,EAApE;AACH,KAFD,MAEO,IAAI7I,MAAM,CAAC8I,aAAX,EAA0B;AAC7B,UAAI;AACAvH,QAAAA,GAAG,GAAG,IAAIuH,aAAJ,CAAkB,gBAAlB,CAAN;AACH,OAFD,CAEE,OAAOC,CAAP,EAAU;AACR,YAAI;AACAxH,UAAAA,GAAG,GAAG,IAAIuH,aAAJ,CAAkB,mBAAlB,CAAN;AACH,SAFD,CAEE,OAAOC,CAAP,EAAU;AACRpE,UAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAAC,aAAD,EAAgB3D,IAAhB,CAAjC;AACA,iBAAO,KAAP;AACH;AACJ;AACJ,KAXM,MAWA;AACHyD,MAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAAC,aAAD,EAAgB3D,IAAhB,CAAjC;AACA,aAAO,KAAP;AACH;;AAED,QAAImG,GAAG,GAAG3F,OAAO,CAACV,YAAlB;AACAqG,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,eAAZ,EAA+BzB,OAAO,CAACtB,OAAvC,CAAN;AACAiH,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,eAAZ,EAA+B0B,KAAK,CAAClD,MAAN,CAAauF,MAA5C,CAAN;AACAG,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,WAAZ,EAA+B6F,WAAW,CAAC9H,IAAD,CAA1C,CAAN;AACAmG,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,YAAZ,EAA+BjC,IAAI,CAAC4F,IAApC,CAAN;AACAO,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,WAAZ,EAA+B0E,WAAW,CAAC3G,IAAD,CAA1C,CAAN;AACAmG,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,iBAAZ,EAA+BE,WAAW,CAACwE,WAAW,CAAC3G,IAAD,CAAZ,CAA1C,CAAN;AACAmG,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,aAAZ,EAA+BH,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmB4F,MAAlD,CAAN;AACAe,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,aAAZ,EAA+BH,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmBiF,MAAlD,CAAN;AACA0B,IAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,YAAZ,EAA+BH,IAAI,CAACtB,OAAO,CAAChB,IAAT,CAAJ,CAAmBsF,KAAlD,CAAN;AAEA,QAAIiD,aAAa,GAAG;AAChB1H,MAAAA,GAAG,EAAEA,GADW;AAEhBL,MAAAA,IAAI,EAAEA,IAFU;AAGhBE,MAAAA,WAAW,EAAEyD,KAAK,CAAClD,MAAN,CAAauF,MAHV;AAIhBI,MAAAA,MAAM,EAAE;AAJQ,KAApB;AAMAzC,IAAAA,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBsE,KAAK,CAAClD,MAAN,CAAauF,MAAhC,IAA0C+B,aAA1C;AACApE,IAAAA,KAAK,CAAClD,MAAN,CAAauF,MAAb;;AAGA,QAAIhG,IAAI,CAAC4F,IAAL,KAAc,WAAd,IAA6B5F,IAAI,CAAC4F,IAAL,KAAc,WAA3C,IACA5F,IAAI,CAAC4F,IAAL,KAAc,WADd,IAC6B5F,IAAI,CAAC4F,IAAL,KAAc,YAD/C,EAEE;AACE,UAAI,OAAQoC,UAAR,KAAwB,WAA5B,EAAyC;AACrC,YAAIC,MAAM,GAAG,IAAID,UAAJ,EAAb;;AACAC,QAAAA,MAAM,CAACC,MAAP,GAAgB,UAAUhH,aAAV,EAAyB;AACrCiF,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,kBAAZ,EAAgCf,aAAa,CAACwF,MAAd,CAAqBxC,MAArD,CAAN;AACAiC,UAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,WAAZ,EAAyB,cAAzB,CAAN;AACAtD,UAAAA,CAAC,CAAC,MAAM6B,OAAO,CAACrB,OAAf,CAAD,CAAyBmH,MAAzB,CAAgCH,GAAhC;;AAEA,cAAI3F,OAAO,CAACX,SAAZ,EAAuB;AACnBsI,YAAAA,UAAU,CAACxE,KAAD,EAAQoE,aAAR,CAAV;AACH;AACJ,SARD;;AASAE,QAAAA,MAAM,CAACG,aAAP,CAAqBpI,IAArB;AAEH,OAbD,MAaO;AACHmG,QAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,kBAAZ,EAAgC,EAAhC,CAAN;AACAkE,QAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,WAAZ,EAAyB,gCAAzB,CAAN;AACAtD,QAAAA,CAAC,CAAC,MAAM6B,OAAO,CAACrB,OAAf,CAAD,CAAyBmH,MAAzB,CAAgCH,GAAhC;;AAEA,YAAI3F,OAAO,CAACX,SAAZ,EAAuB;AACnBsI,UAAAA,UAAU,CAACxE,KAAD,EAAQoE,aAAR,CAAV;AACH;AACJ;AAEJ,KA1BD,MA0BO;AACH5B,MAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,kBAAZ,EAAgC,EAAhC,CAAN;AACAkE,MAAAA,GAAG,GAAGA,GAAG,CAAClE,OAAJ,CAAY,WAAZ,EAAyB,YAAzB,CAAN;AACAtD,MAAAA,CAAC,CAAC,MAAM6B,OAAO,CAACrB,OAAf,CAAD,CAAyBmH,MAAzB,CAAgCH,GAAhC;;AAEA,UAAI3F,OAAO,CAACX,SAAZ,EAAuB;AACnBsI,QAAAA,UAAU,CAACxE,KAAD,EAAQoE,aAAR,CAAV;AACH;AACJ;AACJ;AAGD;;;;;;;AAKA,WAASD,WAAT,CAAqB9H,IAArB,EAA2B;AACvB,WAAOA,IAAI,CAACqC,IAAL,IAAarC,IAAI,CAACqI,QAAzB;AACH;AAGD;;;;;;;AAKA,WAAS1B,WAAT,CAAqB3G,IAArB,EAA2B;AACvB,WAAOA,IAAI,CAACkC,IAAL,IAAalC,IAAI,CAACsI,QAAzB;AACH;AAGD;;;;;;;AAKA,WAASnG,WAAT,CAAqBoG,KAArB,EAA4B;AAExB,QAAIrE,MAAM,GAAG,EAAb;;AAEA,QAAIqE,KAAK,IAAI,UAAb,EAAyB;AACrBrE,MAAAA,MAAM,GAAG,CAACqE,KAAK,GAAG,UAAT,EAAqBC,OAArB,CAA6B,CAA7B,IAAkC,KAA3C;AACH,KAFD,MAEO,IAAID,KAAK,IAAI,OAAb,EAAsB;AACzBrE,MAAAA,MAAM,GAAG,CAACqE,KAAK,GAAG,OAAT,EAAkBC,OAAlB,CAA0B,CAA1B,IAA+B,KAAxC;AACH,KAFM,MAEA,IAAID,KAAK,IAAI,IAAb,EAAmB;AACtBrE,MAAAA,MAAM,GAAG,CAACqE,KAAK,GAAG,IAAT,EAAeC,OAAf,CAAuB,CAAvB,IAA4B,KAArC;AACH,KAFM,MAEA,IAAID,KAAK,IAAI,CAAb,EAAgB;AACnBrE,MAAAA,MAAM,GAAGqE,KAAK,GAAG,QAAjB;AACH;;AAED,WAAOrE,MAAP;AACH;AAGD;;;;;;;;AAMA,WAASiE,UAAT,CAAoBxE,KAApB,EAA2BoE,aAA3B,EAA0C;AAEtC,QAAIvH,OAAO,GAAOmD,KAAK,CAAClD,MAAN,CAAaD,OAA/B;AACA,QAAIN,WAAW,GAAG6H,aAAa,CAAC7H,WAAhC;AACA,QAAIF,IAAI,GAAU+H,aAAa,CAAC/H,IAAhC;AACA,QAAIK,GAAG,GAAW0H,aAAa,CAAC1H,GAAhC;;AAEA,QAAI,OAAOG,OAAO,CAACZ,OAAf,KAA2B,QAA/B,EAAyC;AACrCS,MAAAA,GAAG,CAACT,OAAJ,GAAcY,OAAO,CAACZ,OAAtB;AACH,KATqC,CAWtC;;;AACAS,IAAAA,GAAG,CAACoI,WAAJ,GAAkB,YAAW;AACzBV,MAAAA,aAAa,CAAC3B,MAAd,GAAuB,SAAvB;AACA3C,MAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAACzD,WAAD,EAAcF,IAAd,CAAjC;AACH,KAHD,CAZsC,CAiBtC;;;AACAK,IAAAA,GAAG,CAAC+E,MAAJ,CAAWsD,UAAX,GAAwB,UAASxH,aAAT,EAAwB;AAC5CuC,MAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,UAAxB,EAAoC,CAACzD,WAAD,EAAcgB,aAAd,EAA6BlB,IAA7B,CAApC;AACH,KAFD,CAlBsC,CAsBtC;;;AACAK,IAAAA,GAAG,CAAC6H,MAAJ,GAAa,YAAW;AACpBH,MAAAA,aAAa,CAAC3B,MAAd,GAAuB,QAAvB;;AAEA,UAAI/F,GAAG,CAAC+F,MAAJ,KAAe,GAAnB,EAAwB;AACpB3C,QAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,SAAxB,EAAmC,CAACtD,GAAG,CAACsI,YAAL,EAAmBzI,WAAnB,EAAgCF,IAAhC,CAAnC;AACH,OAFD,MAEO;AACHyD,QAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAAC,YAAD,EAAe3D,IAAf,EAAqBE,WAArB,EAAkCG,GAAG,CAACsI,YAAtC,CAAjC;AACH;AACJ,KARD,CAvBsC,CAiCtC;;;AACAtI,IAAAA,GAAG,CAACuI,SAAJ,GAAgB,YAAW;AACvBnF,MAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,QAAxB,EAAkC,CAACzD,WAAD,EAAcF,IAAd,CAAlC;AACH,KAFD,CAlCsC,CAsCtC;;;AACAK,IAAAA,GAAG,CAACwI,OAAJ,GAAc,YAAW;AACrBd,MAAAA,aAAa,CAAC3B,MAAd,GAAuB,UAAvB;AACA3C,MAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAACzD,WAAD,EAAcF,IAAd,CAAjC;AACH,KAHD,CAvCsC,CA4CtC;;;AACAK,IAAAA,GAAG,CAACyI,SAAJ,GAAgB,YAAW;AACvBf,MAAAA,aAAa,CAAC3B,MAAd,GAAuB,UAAvB;AACA3C,MAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,SAAxB,EAAmC,CAACzD,WAAD,EAAcF,IAAd,CAAnC;AACH,KAHD,CA7CsC,CAkDtC;;;AACAK,IAAAA,GAAG,CAAC0I,OAAJ,GAAc,UAAS9H,KAAT,EAAgB;AAC1B8G,MAAAA,aAAa,CAAC3B,MAAd,GAAuB,UAAvB;AACA3C,MAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,OAAxB,EAAiC,CAAC,YAAD,EAAe3D,IAAf,EAAqBE,WAArB,EAAkCe,KAAlC,CAAjC;AACH,KAHD;;AAKAZ,IAAAA,GAAG,CAAC2I,IAAJ,CAASxI,OAAO,CAACb,MAAjB,EAAyBa,OAAO,CAAC3B,GAAjC,EAAsC,IAAtC;AACAwB,IAAAA,GAAG,CAAC4I,gBAAJ,CAAqB,eAArB,EAAyC,UAAzC;AACA5I,IAAAA,GAAG,CAAC4I,gBAAJ,CAAqB,kBAArB,EAAyC,gBAAzC;AAGAxF,IAAAA,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,aAAxB,EAAuC,CAACtD,GAAD,EAAMH,WAAN,EAAmBF,IAAnB,CAAvC;;AAEA,QAAIlB,MAAM,CAACoK,QAAP,KAAoBC,SAAxB,EAAmC;AAC/B,UAAIC,QAAQ,GAAG,IAAIF,QAAJ,EAAf;AACAE,MAAAA,QAAQ,CAAC9C,MAAT,CAAgB9F,OAAO,CAAClB,SAAxB,EAAmCU,IAAnC;;AAEA,UAAI4G,MAAM,CAACC,IAAP,CAAYrG,OAAO,CAACjB,WAApB,EAAiC8E,MAArC,EAA6C;AACzC1F,QAAAA,CAAC,CAAC0K,IAAF,CAAO7I,OAAO,CAACjB,WAAf,EAA4B,UAAS8C,IAAT,EAAeiH,KAAf,EAAqB;AAC7CF,UAAAA,QAAQ,CAAC9C,MAAT,CAAgBjE,IAAhB,EAAsBiH,KAAtB;AACH,SAFD;AAGH;;AAED,aAAOjJ,GAAG,CAACkJ,IAAJ,CAASH,QAAT,CAAP;AAEH,KAZD,MAYO;AACH;AACA,aAAO/I,GAAG,CAACkJ,IAAJ,CAASvJ,IAAT,CAAP;AACH;AACJ;;AAID,MAAIwJ,OAAO,GAAG;AACVpE,IAAAA,MAAM,EAAE,UAASlG,OAAT,EAAkBgB,WAAlB,EAA+B;AACnC,UAAIyD,KAAK,GAAG+B,QAAQ,CAACC,cAAT,CAAwBzG,OAAxB,CAAZ;;AAEA,UAAIyE,KAAK,IAAIA,KAAK,CAACiC,IAAN,KAAe,MAAxB,IAAkC,OAAOjC,KAAK,CAAClD,MAAb,KAAwB,QAA9D,EAAwE;AACpE,YAAIP,WAAW,KAAK,GAApB,EAAyB;AACrBvB,UAAAA,CAAC,CAAC0K,IAAF,CAAO1F,KAAK,CAAClD,MAAN,CAAapB,KAApB,EAA2B,UAASoK,GAAT,EAAc1B,aAAd,EAA6B;AACpD,gBAAIA,aAAa,CAAC3B,MAAd,KAAyB,UAA7B,EAAyC;AACrC+B,cAAAA,UAAU,CAACxE,KAAD,EAAQoE,aAAR,CAAV;AACH;AACJ,WAJD;AAMH,SAPD,MAOO,IAAI,OAAOpE,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBa,WAAnB,CAAP,KAA2C,QAA/C,EAAyD;AAC5DiI,UAAAA,UAAU,CAACxE,KAAD,EAAQA,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBa,WAAnB,CAAR,CAAV;AACH;AACJ;AACJ,KAhBS;AAkBVuE,IAAAA,MAAM,EAAE,UAASvF,OAAT,EAAkBgB,WAAlB,EAA+B;AACnC,UAAIyD,KAAK,GAAG+B,QAAQ,CAACC,cAAT,CAAwBzG,OAAxB,CAAZ;;AAEA,UAAIyE,KAAK,IAAIA,KAAK,CAACiC,IAAN,KAAe,MAAxB,IAAkC,OAAOjC,KAAK,CAAClD,MAAb,KAAwB,QAA9D,EAAwE;AACpE,YAAID,OAAO,GAAGmD,KAAK,CAAClD,MAAN,CAAaD,OAA3B;AACA,YAAIL,KAAK,GAAKyG,MAAM,CAACC,IAAP,CAAYlD,KAAK,CAAClD,MAAN,CAAapB,KAAzB,EAAgCgF,MAA9C;;AAEA,YAAInE,WAAW,KAAK,GAApB,EAAyB;AAErB,cAAIuD,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,QAAxB,EAAkC,CAAC,GAAD,EAAMxD,KAAN,CAAlC,MAAoD,KAAxD,EAA+D;AAC3D;AACH;;AACDwD,UAAAA,KAAK,CAAClD,MAAN,CAAapB,KAAb,GAAqB,EAArB;AACAV,UAAAA,CAAC,CAAC,iBAAiBO,OAAjB,GAA2B,IAA5B,CAAD,CAAmCwK,OAAnC,CAA2C,MAA3C,EAAmD,YAAU;AACzD/K,YAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ8F,MAAR;AACH,WAFD;AAIH,SAVD,MAUO,IAAI,OAAOd,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBa,WAAnB,CAAP,KAA2C,QAA/C,EAAyD;AAC5D,cAAIuD,MAAM,CAACO,SAAP,CAAiBL,KAAjB,EAAwB,QAAxB,EAAkC,CAACA,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBa,WAAnB,CAAD,EAAkCC,KAAlC,EAAyCD,WAAzC,CAAlC,MAA6F,KAAjG,EAAwG;AACpG;AACH;;AAED,iBAAOyD,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBa,WAAnB,CAAP;AACAvB,UAAAA,CAAC,CAAC,aAAaO,OAAb,GAAuB,GAAvB,GAA6BgB,WAA9B,CAAD,CAA4CwJ,OAA5C,CAAoD,MAApD,EAA4D,YAAU;AAClE/K,YAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ8F,MAAR;AACH,WAFD;AAGH;AACJ;AACJ,KA9CS;AAgDVV,IAAAA,YAAY,EAAE,UAAS7E,OAAT,EAAkBmD,IAAlB,EAAwB;AAClC,UAAIsB,KAAK,GAAG+B,QAAQ,CAACC,cAAT,CAAwBzG,OAAxB,CAAZ;;AAEA,UAAIyE,KAAK,IAAIA,KAAK,CAACiC,IAAN,KAAe,MAAxB,IAAkC,OAAOjC,KAAK,CAAClD,MAAb,KAAwB,QAA9D,EAAwE;AACpEgD,QAAAA,MAAM,CAACM,YAAP,CAAoBJ,KAApB,EAA2BtB,IAA3B;AACH;AACJ,KAtDS;AAwDVyC,IAAAA,KAAK,EAAE,UAAS5F,OAAT,EAAkBgB,WAAlB,EAA+B;AAClC,UAAIyD,KAAK,GAAG+B,QAAQ,CAACC,cAAT,CAAwBzG,OAAxB,CAAZ;;AAEA,UAAIyE,KAAK,IAAIA,KAAK,CAACiC,IAAN,KAAe,MAAxB,IAAkC,OAAOjC,KAAK,CAAClD,MAAb,KAAwB,QAA9D,EAAwE;AACpE,YAAIP,WAAW,KAAK,GAApB,EAAyB;AACrBvB,UAAAA,CAAC,CAAC0K,IAAF,CAAO1F,KAAK,CAAClD,MAAN,CAAapB,KAApB,EAA2B,UAASoK,GAAT,EAAc1B,aAAd,EAA6B;AACpDA,YAAAA,aAAa,CAAC1H,GAAd,CAAkByE,KAAlB;AACH,WAFD;AAIH,SALD,MAKO,IAAI,OAAOnB,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBa,WAAnB,CAAP,KAA2C,QAA/C,EAAyD;AAC5DyD,UAAAA,KAAK,CAAClD,MAAN,CAAapB,KAAb,CAAmBa,WAAnB,EAAgCG,GAAhC,CAAoCyE,KAApC;AACH;AACJ;AACJ;AArES,GAAd;AAyEA;;;;;;;AAMAnG,EAAAA,CAAC,CAAC8B,MAAF,GAAW,UAAS+E,MAAT,EAAiBmE,MAAjB,EAAyBC,MAAzB,EAAiC;AACxC,QAAK,OAAOpE,MAAP,KAAkB,QAAvB,EAAkC;AAC9BD,MAAAA,IAAI,CAACC,MAAD,CAAJ;AAEA,UAAI7B,KAAK,GAAG+B,QAAQ,CAACC,cAAT,CAAwBH,MAAM,CAACtG,OAA/B,CAAZ;;AACA,UAAIyE,KAAK,IAAIA,KAAK,CAACiC,IAAN,KAAe,MAAxB,IAAkC,OAAOjC,KAAK,CAAClD,MAAb,KAAwB,QAA9D,EAAwE;AACpE8D,QAAAA,aAAa,CAACZ,KAAd,GAAsBA,KAAtB;AACA,eAAOY,aAAP;AACH;AAEJ,KATD,MASO,IAAK,OAAOiB,MAAP,KAAkB,QAAlB,IACR,OAAOmE,MAAP,KAAkB,QADV,IAER,OAAOH,OAAO,CAACG,MAAD,CAAd,IAA0B,UAFvB,EAGL;AACEH,MAAAA,OAAO,CAACG,MAAD,CAAP,CAAgBnE,MAAhB,EAAwBoE,MAAxB;AAEH,KANM,MAMA,IAAK,OAAOpE,MAAP,KAAkB,QAAlB,IACR,OAAOmE,MAAP,KAAkB,WADV,IAER,OAAOC,MAAP,KAAkB,WAFf,EAGL;AACE,UAAIjG,KAAK,GAAG+B,QAAQ,CAACC,cAAT,CAAwBH,MAAxB,CAAZ;;AACA,UAAI7B,KAAK,IAAIA,KAAK,CAACiC,IAAN,KAAe,MAAxB,IAAkC,OAAOjC,KAAK,CAAClD,MAAb,KAAwB,QAA9D,EAAwE;AACpE8D,QAAAA,aAAa,CAACZ,KAAd,GAAsBA,KAAtB;AACA,eAAOY,aAAP;AACH;AAEJ,KAVM,MAUA;AACH5F,MAAAA,CAAC,CAAC6D,KAAF,CAAS,oBAAqBgD,MAA9B;AACH;AACJ,GA7BD;AA8BH,CApxBD,EAoxBG9G,MApxBH","sourcesContent":["/* eslint no-undef: \"off\"*/\n\nimport jQuery from 'jquery';\n\n(function($){\n    var default_options = {\n        url: window.location.pathname + window.location.search,\n        inputID: '',\n        queueID: '',\n        dropzoneID: '',\n        files: [],\n        fieldName: 'filedata',\n        extraFields: {},\n        lang: 'en',\n        sizeLimit: 0,\n        filesLimit: 0,\n        method: 'post',\n        timeout: null,\n        autostart: false,\n        templateFile: '<div id=\"fileup-[INPUT_ID]-[FILE_NUM]\" class=\"fileup-file [TYPE]\">' +\n                          '<div class=\"fileup-preview\">' +\n                              '<img src=\"[PREVIEW_SRC]\" alt=\"[NAME]\"/>' +\n                          '</div>' +\n                          '<div class=\"fileup-container\">' +\n                              '<div class=\"fileup-description\">' +\n                                    '<span class=\"fileup-name\">[NAME]</span> (<span class=\"fileup-size\">[SIZE_HUMAN]</span>)' +\n                              '</div>' +\n                              '<div class=\"fileup-controls\">' +\n                                  '<span class=\"fileup-remove\" data-id=\"\\'[INPUT_ID]\\'\" data-action=\"\\'onRemove\\'\" data-file-num=\"\\'[FILE_NUM]\\'\" title=\"[REMOVE]\"></span>' +\n                                  '<span class=\"fileup-upload\" onclick=\"$.fileup(\\'[INPUT_ID]\\', \\'upload\\', \\'[FILE_NUM]\\');\">[UPLOAD]</span>' +\n                                  '<span class=\"fileup-abort\" onclick=\"$.fileup(\\'[INPUT_ID]\\', \\'abort\\', \\'[FILE_NUM]\\');\" style=\"display:none\">[ABORT]</span>' +\n                              '</div>' +\n                              '<div class=\"fileup-result\"></div>' +\n                              '<div class=\"fileup-progress\">' +\n                                    '<div class=\"fileup-progress-bar\"></div>' +\n                              '</div>' +\n                          '</div>' +\n                          '<div class=\"fileup-clear\"></div>' +\n                      '</div>',\n        onSelect: function(file) {},\n        onRemove: function(file_number, total, file) {},\n        onBeforeStart: function(file_number, xhr, file) {},\n        onStart: function(file_number, file) {},\n        onStartSystem: function(file_number, file) {\n            var options = this.fileup.options;\n            var $file   = $('#fileup-' + options.inputID + '-' + file_number);\n            $file.find('.fileup-controls .fileup-upload').hide();\n            $file.find('.fileup-controls .fileup-abort').show();\n            $file.find('.fileup-result')\n                .removeClass('fileup-error')\n                .removeClass('fileup-success')\n                .text('');\n        },\n        onProgress: function(event, file_number, ProgressEvent, file) {\n            if (event.lengthComputable) {\n                var options = this.fileup.options;\n                var percent = Math.ceil(ProgressEvent.loaded / ProgressEvent.total * 100);\n                $('#fileup-' + options.inputID + '-' + file_number + ' .fileup-progress-bar').css('width', percent + \"%\");\n            }\n        },\n        onSuccess: function(file_number, response, file) {},\n        onError: function(event, file, file_number, response) {},\n        onErrorSystem: function(event, file, file_number) {\n            var options = this.fileup.options;\n            switch(event) {\n                case 'files_limit':\n                    var message = i18n[options.lang].errorFilesLimit;\n                    alert(message.replace(/%filesLimit%/g, options.filesLimit));\n                    break;\n                case 'size_limit':\n                    var size    = formatHuman(options.sizeLimit);\n                    var message = i18n[options.lang].errorSizeLimit;\n                    message = message.replace(/%sizeLimit%/g, size);\n                    message = message.replace(/%fileName%/g, file.name);\n                    alert(message);\n                    break;\n                case 'file_type':\n                    var message = i18n[options.lang].errorFileType;\n                    alert(message.replace(/%fileName%/g, file.name));\n                    break;\n                case 'bad_status':\n                case 'error_load':\n                    var $file = $('#fileup-' + options.inputID + '-' + file_number);\n                    $file.find('.fileup-controls .fileup-abort').hide();\n                    $file.find('.fileup-controls .fileup-upload').show();\n                    $file.find('.fileup-result')\n                        .addClass('fileup-error')\n                        .text(i18n[options.lang].error);\n                    break;\n                case 'old_browser':\n                    alert(i18n[options.lang].errorOldBrowser);\n                    break;\n            }\n        },\n        onAbort: function(file_number, file) {},\n        onAbortSystem: function(file_number, file) {\n            var options = this.fileup.options;\n            var $file   = $('#fileup-' + options.inputID + '-' + file_number);\n            $file.find('.fileup-controls .fileup-abort').hide();\n            $file.find('.fileup-controls .fileup-upload').show();\n            $file.find('.fileup-result')\n                .removeClass('fileup-error')\n                .removeClass('fileup-success')\n                .text('');\n        },\n        onTimeout: function(file_number, file) {},\n        onTimeoutSystem: function(file_number, file) {\n            var options = this.fileup.options;\n            var $file   = $('#fileup-' + options.inputID + '-' + file_number);\n            $file.find('.fileup-controls .fileup-abort').hide();\n            $file.find('.fileup-controls .fileup-upload').show();\n            $file.find('.fileup-result')\n                .removeClass('fileup-error')\n                .removeClass('fileup-success')\n                .text('');\n        },\n        onFinish: function(file_number, file) {},\n        onSuccessSystem: function(response, file_number, file) {\n            var options = this.fileup.options;\n            var $file   = $('#fileup-' + options.inputID + '-' + file_number);\n            $file.find('.fileup-controls .fileup-abort').hide();\n            $file.find('.fileup-controls .fileup-upload').hide();\n            $file.find('.fileup-result')\n                .removeClass('fileup-error')\n                .addClass('fileup-success')\n                .text(i18n[options.lang].complete);\n        },\n        onDragOver: function(event) {\n            event.stopPropagation();\n            event.preventDefault();\n            event.dataTransfer.dropEffect = 'copy';\n        },\n        onDragLeave: function(event) {},\n        onDragEnd: function(event) {},\n        onDragEnter: function(event) {\n            event.stopPropagation();\n            event.preventDefault();\n            event.dataTransfer.dropEffect = 'copy';\n        }\n    };\n\n\n    var events = {\n        addEvent : function(input, name, callback) {\n            var stack = input.fileup.events[name] || [];\n            stack.push(callback);\n            input.fileup.events[name] = stack;\n        },\n        removeEvents : function(input, name) {\n            input.fileup.events[name] = [];\n        },\n        callEvent : function(input, name, args) {\n            var result = true,\n                event_result;\n\n            if (input.fileup.events[name]) {\n                for (var i = 0; i < input.fileup.events[name].length; i++) {\n                    if (typeof input.fileup.events[name][i] === 'function') {\n                        if (args) {\n                            event_result = input.fileup.events[name][i].apply(input, args);\n                            if (result && event_result === false) {\n                                result = false;\n                            }\n                        } else {\n                            event_result = input.fileup.events[name][i].apply(input);\n                            if (result && event_result === false) {\n                                result = false;\n                            }\n                        }\n\n                    }\n                }\n            }\n\n            return result;\n        }\n    };\n\n\n    var eventRegister = {\n        input :       {},\n        select :      function(callback) {events.addEvent(eventRegister.input, 'select',      callback); return eventRegister;},\n        remove :      function(callback) {events.addEvent(eventRegister.input, 'remove',      callback); return eventRegister;},\n        beforeStart : function(callback) {events.addEvent(eventRegister.input, 'beforeStart', callback); return eventRegister;},\n        start :       function(callback) {events.addEvent(eventRegister.input, 'start',       callback); return eventRegister;},\n        progress :    function(callback) {events.addEvent(eventRegister.input, 'progress',    callback); return eventRegister;},\n        success :     function(callback) {events.addEvent(eventRegister.input, 'success',     callback); return eventRegister;},\n        error :       function(callback) {events.addEvent(eventRegister.input, 'error',       callback); return eventRegister;},\n        abort :       function(callback) {events.addEvent(eventRegister.input, 'abort',       callback); return eventRegister;},\n        timeout :     function(callback) {events.addEvent(eventRegister.input, 'timeout',     callback); return eventRegister;},\n        dragOver :    function(callback) {events.addEvent(eventRegister.input, 'dragOver',    callback); return eventRegister;},\n        dragLeave :   function(callback) {events.addEvent(eventRegister.input, 'dragLeave',   callback); return eventRegister;},\n        dragEnd :     function(callback) {events.addEvent(eventRegister.input, 'dragEnd',     callback); return eventRegister;},\n        dragEnter :   function(callback) {events.addEvent(eventRegister.input, 'dragEnter',   callback); return eventRegister;}\n    };\n\n\n    var i18n = {\n        ru: {\n            upload: 'Загрузить',\n            abort: 'Остановить',\n            remove: 'Удалить',\n            complete: 'Готово',\n            error: 'Ошибка',\n            errorFilesLimit: 'Количество выбранных файлов превышает лимит (%filesLimit%)',\n            errorSizeLimit: 'Файл \"%fileName%\" превышает предельный размер (%sizeLimit%)',\n            errorFileType: 'Файл \"%fileName%\" является некорректным',\n            errorOldBrowser: 'Ваш браузер не может загружать файлы. Обновите его до последней версии'\n        },\n        en: {\n            upload: 'Upload',\n            abort: 'Abort',\n            remove: 'Remove',\n            complete: 'Complete',\n            error: 'Error',\n            errorFilesLimit: 'The number of selected files exceeds the limit (%filesLimit%)',\n            errorSizeLimit: 'File \"%fileName%\" exceeds the size limit (%sizeLimit%)',\n            errorFileType: 'File \"%fileName%\" is incorrect',\n            errorOldBrowser: 'Your browser can not upload files. Update to the latest version'\n        },\n        ptbr: {\n            upload: 'Enviar imagem',\n            abort: 'Cancelar',\n            remove: 'Excluir',\n            complete: 'Concluído',\n            error: 'Erro',\n            errorFilesLimit: 'Limite máximo de %filesLimit%',\n            errorSizeLimit: 'O arquivo \"%fileName%\" excede o limite de tamanho de %sizeLimit%',\n            errorFileType: 'O arquivo \"%fileName%\" é inválido',\n            errorOldBrowser: 'Seu navegador não suporte este recurso'\n        }\n    };\n\n\n    /**\n     * Init fileup\n     * @param {object} param1\n     */\n    function init(param1) {\n\n        var options = $.extend(false, default_options, param1);\n        var input   = document.getElementById(options.inputID);\n\n        if (input && input.type === 'file') {\n            if (options.dropzoneID) {\n                var dropZone = document.getElementById(options.dropzoneID);\n                if (dropZone) {\n                    dropZone.addEventListener('dragover',  function(event) {\n                        events.callEvent(input, 'dragOver', [event]);\n                    });\n                    dropZone.addEventListener('dragleave', function(event) {\n                        events.callEvent(input, 'dragLeave', [event]);\n                    });\n                    dropZone.addEventListener('dragenter', function(event) {\n                        events.callEvent(input, 'dragEnter', [event]);\n                    });\n                    dropZone.addEventListener('drop',      dropFiles);\n                    dropZone.fileup = {\n                        input: input\n                    };\n                }\n            }\n\n            input.fileup = {\n                files: {},\n                nextID: 0,\n                options: options,\n                events: {}\n            };\n\n            events.addEvent(input, 'select',      options.onSelect);\n            events.addEvent(input, 'remove',      options.onRemove);\n            events.addEvent(input, 'beforeStart', options.onBeforeStart);\n            events.addEvent(input, 'start',       options.onStartSystem);\n            events.addEvent(input, 'start',       options.onStart);\n            events.addEvent(input, 'progress',    options.onProgress);\n            events.addEvent(input, 'success',     options.onSuccessSystem);\n            events.addEvent(input, 'success',     options.onSuccess);\n            events.addEvent(input, 'error',       options.onErrorSystem);\n            events.addEvent(input, 'error',       options.onError);\n            events.addEvent(input, 'abort',       options.onAbortSystem);\n            events.addEvent(input, 'abort',       options.onAbort);\n            events.addEvent(input, 'timeout',     options.onTimeoutSystem);\n            events.addEvent(input, 'timeout',     options.onTimeout);\n            events.addEvent(input, 'dragOver',    options.onDragOver);\n            events.addEvent(input, 'dragLeave',   options.onDragLeave);\n            events.addEvent(input, 'dragEnd',     options.onDragEnd);\n            events.addEvent(input, 'dragEnter',   options.onDragEnter);\n\n            $(input).on('change', appendFiles);\n\n\n            if (options.files.length > 0) {\n                for (var i = 0; i < options.files.length; i++) {\n\n                    var tpl = options.templateFile;\n                    tpl = tpl.replace(/\\[INPUT_ID\\]/g,   options.inputID);\n                    tpl = tpl.replace(/\\[FILE_NUM\\]/g,   input.fileup.nextID);\n                    tpl = tpl.replace(/\\[NAME\\]/g,       options.files[i].name);\n                    tpl = tpl.replace(/\\[SIZE_HUMAN\\]/g, formatHuman(options.files[i].size));\n                    tpl = tpl.replace(/\\[UPLOAD\\]/g,     i18n[options.lang].upload);\n                    tpl = tpl.replace(/\\[REMOVE\\]/g,     i18n[options.lang].remove);\n                    tpl = tpl.replace(/\\[ABORT\\]/g,      i18n[options.lang].abort);\n\n                    input.fileup.files[input.fileup.nextID] = {\n                        xhr: null,\n                        file: options.files[i],\n                        file_number: input.fileup.nextID,\n                        status: 'loaded'\n                    };\n\n                    if (options.files[i].previewUrl) {\n                        tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, options.files[i].previewUrl);\n                        tpl = tpl.replace(/\\[TYPE\\]/g,        'fileup-image');\n\n                    } else {\n                        tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, \"\");\n                        tpl = tpl.replace(/\\[TYPE\\]/g,        'fileup-doc');\n                    }\n\n                    $('#' + options.queueID).append(tpl)\n                        .find('.fileup-progress, .fileup-result, .fileup-upload, .fileup-abort').remove();\n\n\n                    if (options.files[i].downloadUrl) {\n                        var $name = $('#fileup-' + options.inputID + '-' + input.fileup.nextID).find('.fileup-name');\n                        if ($name[0]) {\n                            $name.replaceWith('<a href=\"' + options.files[i].downloadUrl + '\" class=\"fileup-name\" ' +\n                                                 'download=\"' + options.files[i].name + '\">' + options.files[i].name + '</a>');\n                        }\n                    }\n\n                    input.fileup.nextID++;\n                }\n            }\n        }\n    }\n\n\n    /**\n     * Drop files in queue\n     * @param {object} event\n     */\n    function dropFiles(event) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        var input   = event.target.fileup.input;\n        var options = input.fileup.options;\n        var files   = event.target.files || event.dataTransfer.files;\n\n        if (files.length) {\n            for (var i = 0; i < files.length; i++) {\n                var file = files[i];\n\n                if (options.sizeLimit > 0 && getFileSize(file) > options.sizeLimit) {\n                    events.callEvent(input, 'error', ['size_limit', file]);\n                    continue;\n                }\n                if (options.filesLimit > 0 && Object.keys(files).length >= options.filesLimit) {\n                    events.callEvent(input, 'error', ['files_limit', file]);\n                    break;\n                }\n                if (typeof input.accept === 'string') {\n                    var accept = input.accept;\n                    if (accept && /[^\\w]+/.test(accept)) {\n                        var is_accept = false;\n                        var types = accept.split(',');\n                        if (types.length > 0) {\n                            for (var t = 0; t < types.length; t++) {\n                                types[t] = types[t].replace(/\\s/g, '');\n                                if (new RegExp(types[t].replace('*', '.*')).test(file.type) ||\n                                    new RegExp(types[t].replace('.', '.*/')).test(file.type)\n                                ) {\n                                    is_accept = true;\n                                    break;\n                                }\n                            }\n                        }\n                        if ( ! is_accept) {\n                            events.callEvent(input, 'error', ['file_type', file]);\n                            continue;\n                        }\n                    }\n                }\n\n                if (events.callEvent(input, 'select', [file]) === false) {\n                    continue;\n                }\n\n                appendFile(file, input);\n            }\n\n            $(input).val('');\n        }\n\n        events.callEvent(input, 'dragEnd', [event]);\n    }\n\n\n    /**\n     * Append files in queue\n     */\n    function appendFiles() {\n\n        if (this.files.length) {\n            var options  = this.fileup.options;\n            var multiple = $(this).is(\"[multiple]\");\n\n            if ( ! multiple) {\n                if (events.callEvent(this, 'remove', ['*', '1', this.files[0]])) {\n                    $('#' + options.queueID).empty();\n                    this.fileup.files = {};\n                } else {\n                    $(this).val('');\n                    return;\n                }\n            }\n\n            for (var i = 0; i < this.files.length; i++) {\n                var file = this.files[i];\n\n                if (options.sizeLimit > 0 && getFileSize(file) > options.sizeLimit) {\n                    events.callEvent(this, 'error', ['size_limit', file]);\n                    continue;\n                }\n                if (options.filesLimit > 0 && Object.keys(this.fileup.files).length >= options.filesLimit) {\n                    events.callEvent(this, 'error', ['files_limit', file]);\n                    break;\n                }\n                if (typeof this.accept === 'string') {\n                    var accept = this.accept;\n                    if (accept && /[^\\w]+/.test(accept)) {\n                        var is_accept = false;\n                        var types = accept.split(',');\n                        if (types.length > 0) {\n                            for (var t = 0; t < types.length; t++) {\n                                types[t] = types[t].replace(/\\s/g, '');\n                                if (new RegExp(types[t].replace('*', '.*')).test(file.type) ||\n                                    new RegExp(types[t].replace('.', '.*/')).test(file.type)\n                                ) {\n                                    is_accept = true;\n                                    break;\n                                }\n                            }\n                        }\n                        if ( ! is_accept) {\n                            events.callEvent(this, 'error', ['file_type', file]);\n                            continue;\n                        }\n                    }\n                }\n                if (events.callEvent(this, 'select', [file]) === false) {\n                    continue;\n                }\n\n                appendFile(file, this);\n            }\n\n            $(this).val('');\n        }\n    }\n\n\n    /**\n     * Append file in queue\n     * @param {File}   file\n     * @param {object} input\n     * @returns {bool|void}\n     */\n    function appendFile(file, input) {\n\n        var options = input.fileup.options;\n\n        if (window.XMLHttpRequest) {\n            var xhr = (\"onload\" in new XMLHttpRequest()) ? new XMLHttpRequest : new XDomainRequest;\n        } else if (window.ActiveXObject) {\n            try {\n                xhr = new ActiveXObject(\"Msxml2.XMLHTTP\");\n            } catch (e) {\n                try {\n                    xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n                } catch (e) {\n                    events.callEvent(input, 'error', ['old_browser', file]);\n                    return false;\n                }\n            }\n        } else {\n            events.callEvent(input, 'error', ['old_browser', file]);\n            return false;\n        }\n\n        var tpl = options.templateFile;\n        tpl = tpl.replace(/\\[INPUT_ID\\]/g,   options.inputID);\n        tpl = tpl.replace(/\\[FILE_NUM\\]/g,   input.fileup.nextID);\n        tpl = tpl.replace(/\\[NAME\\]/g,       getFileName(file));\n        tpl = tpl.replace(/\\[MTYPE\\]/g,      file.type);\n        tpl = tpl.replace(/\\[SIZE\\]/g,       getFileSize(file));\n        tpl = tpl.replace(/\\[SIZE_HUMAN\\]/g, formatHuman(getFileSize(file)));\n        tpl = tpl.replace(/\\[UPLOAD\\]/g,     i18n[options.lang].upload);\n        tpl = tpl.replace(/\\[REMOVE\\]/g,     i18n[options.lang].remove);\n        tpl = tpl.replace(/\\[ABORT\\]/g,      i18n[options.lang].abort);\n\n        var fileContainer = {\n            xhr: xhr,\n            file: file,\n            file_number: input.fileup.nextID,\n            status: 'stand_by'\n        };\n        input.fileup.files[input.fileup.nextID] = fileContainer;\n        input.fileup.nextID++;\n\n\n        if (file.type === 'image/gif' || file.type === 'image/png' ||\n            file.type === 'image/jpg' || file.type === 'image/jpeg'\n        ) {\n            if (typeof (FileReader) !== 'undefined') {\n                var reader = new FileReader();\n                reader.onload = function (ProgressEvent) {\n                    tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, ProgressEvent.target.result);\n                    tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-image');\n                    $('#' + options.queueID).append(tpl);\n\n                    if (options.autostart) {\n                        uploadFile(input, fileContainer);\n                    }\n                };\n                reader.readAsDataURL(file);\n\n            } else {\n                tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n                tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-image fileup-no-preview');\n                $('#' + options.queueID).append(tpl);\n\n                if (options.autostart) {\n                    uploadFile(input, fileContainer);\n                }\n            }\n\n        } else {\n            tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n            tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-doc');\n            $('#' + options.queueID).append(tpl);\n\n            if (options.autostart) {\n                uploadFile(input, fileContainer);\n            }\n        }\n    }\n\n\n    /**\n     * Getter file size\n     * @param {File} file\n     * @returns {string}\n     */\n    function getFileName(file) {\n        return file.name || file.fileName;\n    }\n\n\n    /**\n     * Getter file size\n     * @param {File} file\n     * @returns {integer}\n     */\n    function getFileSize(file) {\n        return file.size || file.fileSize;\n    }\n\n\n    /**\n     * Formatting size\n     * @param {integer} bytes\n     * @returns {string}\n     */\n    function formatHuman(bytes) {\n\n        var result = '';\n\n        if (bytes >= 1073741824) {\n            result = (bytes / 1073741824).toFixed(2) + ' Gb';\n        } else if (bytes >= 1048576) {\n            result = (bytes / 1048576).toFixed(2) + ' Mb';\n        } else if (bytes >= 1024) {\n            result = (bytes / 1024).toFixed(2) + ' Kb';\n        } else if (bytes >= 0) {\n            result = bytes + ' bytes';\n        }\n\n        return result;\n    }\n\n\n    /**\n     * Upload file\n     * @param {object} input\n     * @param {object} fileContainer\n     * @returns {boolean}\n     */\n    function uploadFile(input, fileContainer) {\n\n        var options     = input.fileup.options;\n        var file_number = fileContainer.file_number;\n        var file        = fileContainer.file;\n        var xhr         = fileContainer.xhr;\n\n        if (typeof options.timeout === 'number') {\n            xhr.timeout = options.timeout;\n        }\n\n        // запрос начат\n        xhr.onloadstart = function() {\n            fileContainer.status = 'loading';\n            events.callEvent(input, 'start', [file_number, file]);\n        };\n\n        // браузер получил очередной пакет данных\n        xhr.upload.onprogress = function(ProgressEvent) {\n            events.callEvent(input, 'progress', [file_number, ProgressEvent, file]);\n        };\n\n        // запрос был успешно (без ошибок) завершён\n        xhr.onload = function() {\n            fileContainer.status = 'loaded';\n\n            if (xhr.status === 200) {\n                events.callEvent(input, 'success', [xhr.responseText, file_number, file]);\n            } else {\n                events.callEvent(input, 'error', ['bad_status', file, file_number, xhr.responseText]);\n            }\n        };\n\n        // запрос был завершён (успешно или неуспешно)\n        xhr.onloadend = function() {\n            events.callEvent(input, 'finish', [file_number, file]);\n        };\n\n        // запрос был отменён вызовом xhr.abort()\n        xhr.onabort = function() {\n            fileContainer.status = 'stand_by';\n            events.callEvent(input, 'abort', [file_number, file]);\n        };\n\n        // запрос был прекращён по таймауту\n        xhr.ontimeout = function() {\n            fileContainer.status = 'stand_by';\n            events.callEvent(input, 'timeout', [file_number, file]);\n        };\n\n        // произошла ошибка\n        xhr.onerror = function(event) {\n            fileContainer.status = 'stand_by';\n            events.callEvent(input, 'error', ['error_load', file, file_number, event]);\n        };\n\n        xhr.open(options.method, options.url, true);\n        xhr.setRequestHeader('Cache-Control',    'no-cache');\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n\n        events.callEvent(input, 'beforeStart', [xhr, file_number, file]);\n\n        if (window.FormData !== undefined) {\n            var formData = new FormData();\n            formData.append(options.fieldName, file);\n\n            if (Object.keys(options.extraFields).length) {\n                $.each(options.extraFields, function(name, value){\n                    formData.append(name, value);\n                });\n            }\n\n            return xhr.send(formData);\n\n        } else {\n            // IE 8,9\n            return xhr.send(file);\n        }\n    }\n\n\n\n    var methods = {\n        upload: function(inputID, file_number) {\n            var input = document.getElementById(inputID);\n\n            if (input && input.type === 'file' && typeof input.fileup === 'object') {\n                if (file_number === '*') {\n                    $.each(input.fileup.files, function(key, fileContainer) {\n                        if (fileContainer.status === 'stand_by') {\n                            uploadFile(input, fileContainer);\n                        }\n                    });\n\n                } else if (typeof input.fileup.files[file_number] === 'object') {\n                    uploadFile(input, input.fileup.files[file_number]);\n                }\n            }\n        },\n\n        remove: function(inputID, file_number) {\n            var input = document.getElementById(inputID);\n\n            if (input && input.type === 'file' && typeof input.fileup === 'object') {\n                var options = input.fileup.options;\n                var total   = Object.keys(input.fileup.files).length;\n\n                if (file_number === '*') {\n\n                    if (events.callEvent(input, 'remove', ['*', total]) === false) {\n                        return;\n                    }\n                    input.fileup.files = {};\n                    $('[id^=fileup-' + inputID + '-]').fadeOut('fast', function(){\n                        $(this).remove();\n                    });\n\n                } else if (typeof input.fileup.files[file_number] === 'object') {\n                    if (events.callEvent(input, 'remove', [input.fileup.files[file_number], total, file_number]) === false) {\n                        return;\n                    }\n\n                    delete input.fileup.files[file_number];\n                    $('#fileup-' + inputID + '-' + file_number).fadeOut('fast', function(){\n                        $(this).remove();\n                    });\n                }\n            }\n        },\n\n        removeEvents: function(inputID, name) {\n            var input = document.getElementById(inputID);\n\n            if (input && input.type === 'file' && typeof input.fileup === 'object') {\n                events.removeEvents(input, name);\n            }\n        },\n\n        abort: function(inputID, file_number) {\n            var input = document.getElementById(inputID);\n\n            if (input && input.type === 'file' && typeof input.fileup === 'object') {\n                if (file_number === '*') {\n                    $.each(input.fileup.files, function(key, fileContainer) {\n                        fileContainer.xhr.abort();\n                    });\n\n                } else if (typeof input.fileup.files[file_number] === 'object') {\n                    input.fileup.files[file_number].xhr.abort();\n                }\n            }\n        }\n    };\n\n\n    /**\n     * @param {object|string} param1 Options, inputID\n     * @param {string}        param2 Method name\n     * @param {string|int}    param3 File number\n     * @returns {object}\n     */\n    $.fileup = function(param1, param2, param3) {\n        if ( typeof param1 === 'object' ) {\n            init(param1);\n\n            var input = document.getElementById(param1.inputID);\n            if (input && input.type === 'file' && typeof input.fileup === 'object') {\n                eventRegister.input = input;\n                return eventRegister;\n            }\n\n        } else if ( typeof param1 === 'string' &&\n            typeof param2 === 'string' &&\n            typeof methods[param2] == 'function'\n        ) {\n            methods[param2](param1, param3);\n\n        } else if ( typeof param1 === 'string' &&\n            typeof param2 === 'undefined' &&\n            typeof param3 === 'undefined'\n        ) {\n            var input = document.getElementById(param1);\n            if (input && input.type === 'file' && typeof input.fileup === 'object') {\n                eventRegister.input = input;\n                return eventRegister;\n            }\n\n        } else {\n            $.error( 'Unknown method ' +  param1 );\n        }\n    };\n})(jQuery);"]},"metadata":{},"sourceType":"module"}