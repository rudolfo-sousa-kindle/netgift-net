{"ast":null,"code":"var _jsxFileName = \"/Users/rudolfo/Documents/projects/NetGift/src/components/FinanceiroAdmin.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport setSelect2 from \"../assets/js/setSelect2\";\nimport { Field, reduxForm } from 'redux-form';\nimport { connect } from \"react-redux\";\nimport Loader from \"./Loader\";\nimport GridCards from \"./GridCards\";\nimport Creatable from 'react-select/creatable';\nimport Select from 'react-select';\nimport Extrato from \"./ExtratoAdmin\";\nimport { fetchUserCount, fetchUserSites } from \"../actions/usersActions\";\nimport { fetchViewCount } from \"../actions/viewsActions\";\nimport { fetchExtratoAbstract } from \"../actions/extratoActions\";\nimport { fetchExtrato } from \"../actions/extratoActions\";\nimport { fetchFinancial } from \"../actions/financialActions\";\nimport $ from \"jquery\";\n\nclass FinanceiroAdmin extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 2,\n      financial: [],\n      dashboard: {},\n      dashboard_old: {},\n      revenue: {\n        current: '--',\n        old: '--',\n        percent: '--'\n      },\n      receive: {\n        current: '--',\n        old: '--',\n        percent: '--'\n      },\n      payments: {\n        current: '--',\n        old: '--',\n        percent: '--'\n      }\n    };\n\n    this.change = field => {\n      let periodo = field.value;\n      this.props.fetchUserCount(periodo);\n      this.props.fetchExtratoAbstract(null, null, null, null, null, null, 1, periodo);\n    };\n\n    this.filter = () => {\n      var search = $('#nome-usuario').val();\n      var date_start = $('#inicio-periodo').val();\n      var date_end = $('#fim-periodo').val();\n      var payment_type = $('#select2-tipo-pagamento-container').val();\n      var payment_method = $('#select2-forma-pagamento-container').val();\n      var status = $('#status').val();\n      var periodo = $(\"#filter-date input[name=filter_date]\").val();\n      search = '' === search ? null : search;\n      date_start = '' === date_start ? null : date_start;\n      date_end = '' === date_end ? null : date_end;\n      this.props.fetchExtratoAbstract(search, date_start, date_end, payment_type, payment_method, status, 1, parseInt(periodo));\n      this.state.page = 2;\n    };\n\n    this.paginate = () => {\n      var search = $('#nome-usuario').val();\n      var date_start = $('#inicio-periodo').val();\n      var date_end = $('#fim-periodo').val();\n      var payment_type = $('#select2-tipo-pagamento-container').val();\n      var payment_method = $('#select2-forma-pagamento-container').val();\n      var status = $('#status').val();\n      var periodo = $(\"#filter-date input[name=filter_date]\").val();\n      search = '' === search ? null : search;\n      date_start = '' === date_start ? null : date_start;\n      date_end = '' === date_end ? null : date_end;\n      payment_type = '' === payment_type ? null : payment_type;\n      payment_method = '' === payment_method ? null : payment_method;\n      status = '' === status ? null : status;\n      periodo = '' === periodo ? null : periodo;\n      this.props.fetchExtratoAbstract(search, date_start, date_end, payment_type, payment_method, status, this.state.page, parseInt(periodo));\n      this.state.page++;\n    };\n  }\n\n  componentDidMount() {\n    // setSelect2();\n    this.props.fetchUserCount();\n    this.props.fetchViewCount();\n    this.props.fetchUserSites();\n    this.props.dispatch(fetchExtrato(null, null, null, null, null, null, 1, 1));\n    this.props.fetchExtratoAbstract(null, null, null, null, null, null, 1, 1);\n  }\n\n  render() {\n    const _this$props$extrato = this.props.extrato,\n          extrato = _this$props$extrato.extrato,\n          loading = _this$props$extrato.loading,\n          error = _this$props$extrato.error,\n          extratoOld = _this$props$extrato.extratoOld;\n    const _this$props$usersCoun = this.props.usersCount,\n          total = _this$props$usersCoun.total,\n          totalPassado = _this$props$usersCoun.totalPassado,\n          porcentagem = _this$props$usersCoun.porcentagem,\n          totalSites = _this$props$usersCoun.totalSites,\n          totalSitePassado = _this$props$usersCoun.totalSitePassado,\n          porcentagemSites = _this$props$usersCoun.porcentagemSites;\n    var financial = extrato.financial,\n        dashboard = extrato.dashboard;\n    this.state.dashboard = dashboard;\n    const extratoAbstract = this.props.extratoAbstract;\n\n    if (undefined !== extratoOld) {\n      this.state.dashboard_old = extratoOld.dashboard;\n    }\n\n    if (undefined !== extratoAbstract && undefined !== extratoAbstract.dashboard.last_period) {\n      this.state.payments.old = extratoAbstract.dashboard.last_period.users.recebido.toFixed(2).replace(\".\", \",\");\n      this.state.revenue.old = extratoAbstract.dashboard.last_period.users.disponivel.toFixed(2).replace(\".\", \",\");\n      this.state.receive.old = extratoAbstract.dashboard.last_period.total.toFixed(2).replace(\".\", \",\");\n    }\n\n    var last_page = true;\n\n    if (undefined !== extratoAbstract) {\n      last_page = extratoAbstract.last_page;\n      this.state.financial = extratoAbstract.financial;\n      this.state.receive.current = extratoAbstract.dashboard.total.toFixed(2).replace(\".\", \",\");\n      this.state.revenue.current = extratoAbstract.dashboard.users.disponivel.toFixed(2).replace(\".\", \",\");\n      this.state.payments.current = extratoAbstract.dashboard.users.recebido.toFixed(2).replace(\".\", \",\");\n    } else {\n      this.state.financial = [];\n      this.state.receive.current = \"--\";\n      this.state.revenue.current = \"--\";\n      this.state.payments.current = \"--\";\n    }\n\n    return React.createElement(\"div\", {\n      className: \"wrap-content financeiro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flex flex-baseline flex-space\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Resumo financeiro\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Voc\\xEA est\\xE1 no painel de visualiza\\xE7\\xE3o financeira: aproveite para checar as solicita\\xE7\\xF5es.\"), React.createElement(\"h2\", {\n      className: \"subtitle-mobile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Voc\\xEA est\\xE1 no painel financeiro\")), React.createElement(\"div\", {\n      className: \"filter-admin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Select, {\n      onChange: this.change,\n      options: [{\n        value: 1,\n        label: 'Diário'\n      }, {\n        value: 7,\n        label: 'Semanal'\n      }, {\n        value: 30,\n        label: 'Mensal'\n      }],\n      isSearchable: false,\n      id: \"filter-date\",\n      className: \"status-filter\",\n      name: \"filter_date\",\n      closeMenuOnSelect: true,\n      placeholder: \"Di\\xE1rio\",\n      noOptionsMessage: () => {\n        return \"Tipo não encontrado.\";\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"wrap-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"dash-cards grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"grid grid-cards\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(GridCards, {\n      label: \"Receita\",\n      loading: loading,\n      value: dashboard ? this.state.receive.current : \"--\",\n      value_old: dashboard ? this.state.receive.old : \"--\",\n      pre_values: \"R$\",\n      arrow: this.state.receive.current >= this.state.receive.old ? 'up' : 'down',\n      porcentagem: 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(GridCards, {\n      label: \"Pagamentos feitos\",\n      loading: loading,\n      value: dashboard ? this.state.payments.current : \"--\",\n      value_old: dashboard ? this.state.payments.old : \"--\",\n      pre_values: \"R$\",\n      arrow: this.state.payments.current >= this.state.payments.old ? 'up' : 'down',\n      porcentagem: 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      href: \"https://dashboard.zoop.com.br/login\",\n      target: \"_blank\",\n      className: \"card-dash\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"NETGIFT \\xAE\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Acessar Extrato Financeiro\"))))), React.createElement(Extrato, {\n      financial: this.state.financial,\n      from_class: \"financial-from\",\n      to_class: \"financial-to\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  financial: state.financialResume.financial,\n  extrato: state.extrato,\n  usersCount: state.usersCount,\n  extrato: state.extrato,\n  extratoAbstract: state.extrato.extratoAbstract,\n  views: state.viewsCount\n});\n\nconst reduxFormFilters = reduxForm({\n  form: 'filters'\n})(FinanceiroAdmin);\nexport default connect(mapStateToProps, {\n  fetchFinancial,\n  fetchUserCount,\n  fetchUserSites,\n  fetchExtratoAbstract,\n  fetchViewCount\n})(reduxFormFilters);","map":{"version":3,"sources":["/Users/rudolfo/Documents/projects/NetGift/src/components/FinanceiroAdmin.js"],"names":["React","Component","Link","setSelect2","Field","reduxForm","connect","Loader","GridCards","Creatable","Select","Extrato","fetchUserCount","fetchUserSites","fetchViewCount","fetchExtratoAbstract","fetchExtrato","fetchFinancial","$","FinanceiroAdmin","state","page","financial","dashboard","dashboard_old","revenue","current","old","percent","receive","payments","change","field","periodo","value","props","filter","search","val","date_start","date_end","payment_type","payment_method","status","parseInt","paginate","componentDidMount","dispatch","render","extrato","loading","error","extratoOld","usersCount","total","totalPassado","porcentagem","totalSites","totalSitePassado","porcentagemSites","extratoAbstract","undefined","last_period","users","recebido","toFixed","replace","disponivel","last_page","label","mapStateToProps","financialResume","views","viewsCount","reduxFormFilters","form"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport setSelect2 from \"../assets/js/setSelect2\";\nimport {Field, reduxForm} from 'redux-form';\nimport { connect } from \"react-redux\";\nimport Loader from \"./Loader\";\nimport GridCards from \"./GridCards\";\nimport Creatable from 'react-select/creatable';\nimport Select from 'react-select';\nimport Extrato from \"./ExtratoAdmin\";\nimport {fetchUserCount, fetchUserSites} from \"../actions/usersActions\";\nimport {fetchViewCount} from \"../actions/viewsActions\";\nimport { fetchExtratoAbstract } from \"../actions/extratoActions\";\nimport { fetchExtrato } from \"../actions/extratoActions\";\n\nimport { fetchFinancial } from \"../actions/financialActions\";\nimport $ from \"jquery\";\n\nclass FinanceiroAdmin extends Component {\n\n  componentDidMount(){\n    // setSelect2();\n    this.props.fetchUserCount();\n    this.props.fetchViewCount();\n    this.props.fetchUserSites();\n    this.props.dispatch(fetchExtrato(null, null, null, null, null, null, 1, 1));\n    this.props.fetchExtratoAbstract( null, null, null, null, null, null, 1, 1 );\n  }\n\n  state = {\n    page:2,\n    financial : [],\n    dashboard : {},\n    dashboard_old : {},\n    revenue: { current: '--', old: '--', percent: '--' },\n    receive: { current: '--', old: '--', percent: '--' },\n    payments: { current: '--', old: '--', percent: '--' }\n  };\n\n    change = ( field ) => {\n        let periodo = field.value;\n        this.props.fetchUserCount( periodo );\n        this.props.fetchExtratoAbstract( null, null, null, null, null, null, 1, periodo );\n    }\n\n    filter = () => {\n        var search         = $( '#nome-usuario' ).val();\n        var date_start     = $( '#inicio-periodo' ).val();\n        var date_end       = $( '#fim-periodo' ).val();\n        var payment_type   = $( '#select2-tipo-pagamento-container' ).val();\n        var payment_method = $( '#select2-forma-pagamento-container' ).val();\n        var status         = $( '#status' ).val();\n        var periodo        = $( \"#filter-date input[name=filter_date]\" ).val();\n\n        search     = '' === search ? null : search;\n        date_start = '' === date_start ? null : date_start;\n        date_end   = '' === date_end ? null : date_end;\n        \n        this.props.fetchExtratoAbstract( search, date_start, date_end, payment_type, payment_method, status, 1, parseInt( periodo ) );\n        this.state.page = 2;\n    }\n\n    paginate = () => {\n        var search         = $( '#nome-usuario' ).val();\n        var date_start     = $( '#inicio-periodo' ).val();\n        var date_end       = $( '#fim-periodo' ).val();\n        var payment_type   = $( '#select2-tipo-pagamento-container' ).val();\n        var payment_method = $( '#select2-forma-pagamento-container' ).val();\n        var status         = $( '#status' ).val();\n        var periodo        = $(\"#filter-date input[name=filter_date]\").val();\n\n        search         = '' === search ? null : search;\n        date_start     = '' === date_start ? null : date_start;\n        date_end       = '' === date_end ? null : date_end;\n        payment_type   = '' === payment_type ? null : payment_type;\n        payment_method = '' === payment_method ? null : payment_method;\n        status         = '' === status ? null : status;\n        periodo        = '' === periodo ? null : periodo;\n        \n        this.props.fetchExtratoAbstract( search, date_start, date_end, payment_type, payment_method, status, this.state.page, parseInt( periodo ) );\n        this.state.page++;\n    }\n\n  render() {\n    const { extrato, loading, error, extratoOld } = this.props.extrato;\n    const {total, totalPassado, porcentagem, totalSites, totalSitePassado, porcentagemSites} = this.props.usersCount;\n    var { financial, dashboard }     = extrato;\n    this.state.dashboard             = dashboard;\n    const extratoAbstract = this.props.extratoAbstract;\n    \n    if ( undefined !== extratoOld ) {\n        this.state.dashboard_old = extratoOld.dashboard;\n    }\n    \n    if(undefined !== extratoAbstract && undefined !== extratoAbstract.dashboard.last_period ){\n        this.state.payments.old = extratoAbstract.dashboard.last_period.users.recebido.toFixed(2).replace(\".\", \",\");\n        this.state.revenue.old  = extratoAbstract.dashboard.last_period.users.disponivel.toFixed(2).replace(\".\", \",\")\n        this.state.receive.old  = extratoAbstract.dashboard.last_period.total.toFixed(2).replace(\".\", \",\");\n    }\n\n    var last_page = true;\n    if( undefined !== extratoAbstract ){\n        last_page = extratoAbstract.last_page;\n        this.state.financial        = extratoAbstract.financial;\n        this.state.receive.current  = extratoAbstract.dashboard.total.toFixed(2).replace(\".\", \",\")\n        this.state.revenue.current  = extratoAbstract.dashboard.users.disponivel.toFixed(2).replace(\".\", \",\")\n        this.state.payments.current = extratoAbstract.dashboard.users.recebido.toFixed(2).replace(\".\", \",\")\n    }else{\n        this.state.financial        = [];\n        this.state.receive.current  = \"--\"\n        this.state.revenue.current  = \"--\"\n        this.state.payments.current = \"--\"\n    }\n\n    return (\n        <div className=\"wrap-content financeiro\">\n\n        <div className=\"content-title\">\n            <div className=\"flex flex-baseline flex-space\">\n                <div>\n                    <h1>Resumo financeiro</h1>\n                    <h2>Você está no painel de visualização financeira: aproveite para checar as solicitações.</h2>\n                    <h2 className=\"subtitle-mobile\">Você está no painel financeiro</h2>\n                </div>\n\n                <div className=\"filter-admin\">\n                    <Select\n                        onChange={this.change}\n                        options={[\n                            {value: 1, label: 'Diário'},\n                            {value: 7, label: 'Semanal'},\n                            {value: 30, label: 'Mensal'},\n                        ]}\n                        isSearchable={false}\n                        id=\"filter-date\"\n                        className=\"status-filter\"\n                        name=\"filter_date\"\n                        closeMenuOnSelect={true}\n                        placeholder=\"Diário\"\n                        noOptionsMessage={() => { return \"Tipo não encontrado.\" }}\n                    />\n                </div>\n            </div>\n        </div>\n\n        <div className=\"wrap-body\">\n            <div className=\"dash-cards grid\">\n                <div className=\"grid grid-cards\">\n                    <GridCards\n                        label='Receita'\n                        loading={loading}\n                        value={dashboard ? this.state.receive.current : \"--\"}\n                        value_old={dashboard ? this.state.receive.old : \"--\"}\n                        pre_values=\"R$\"\n                        arrow={this.state.receive.current >= this.state.receive.old ? 'up' : 'down'}\n                        porcentagem={0}\n                    />\n\n                    <GridCards\n                        label='Pagamentos feitos'\n                        loading={loading}\n                        value={dashboard ? this.state.payments.current : \"--\"}\n                        value_old={dashboard ? this.state.payments.old : \"--\"}\n                        pre_values=\"R$\"\n                        arrow={this.state.payments.current >= this.state.payments.old ? 'up' : 'down'}\n                        porcentagem={0}\n                    />\n\n                    <a href=\"https://dashboard.zoop.com.br/login\" target=\"_blank\" className=\"card-dash\">\n                        <small>NETGIFT &reg;</small>\n\n                        <p>Acessar Extrato Financeiro</p>\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <Extrato\n            financial= {this.state.financial}\n            from_class= \"financial-from\"\n            to_class= \"financial-to\"\n        />\n\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => ({\n    financial: state.financialResume.financial,\n    extrato: state.extrato,\n    usersCount: state.usersCount,\n    extrato: state.extrato,\n    extratoAbstract : state.extrato.extratoAbstract,\n    views : state.viewsCount\n})\n\nconst reduxFormFilters = reduxForm({form: 'filters'})(FinanceiroAdmin);\n\nexport default connect(mapStateToProps, {fetchFinancial, fetchUserCount, fetchUserSites, fetchExtratoAbstract, fetchViewCount})(reduxFormFilters);\n"]},"metadata":{},"sourceType":"module"}