{"ast":null,"code":"import axios from \"axios\";\nimport { parse } from \"path\";\nexport const FETCH_USER_COUNT_BEGIN = 'FETCH_USER_COUNT_BEGIN';\nexport const FETCH_USER_COUNT_SUCCESS = 'FETCH_USER_COUNT_SUCCESS';\nexport const FETCH_USER_COUNT_SITES_SUCCESS = 'FETCH_USER_COUNT_SITES_SUCCESS';\nexport const FETCH_USER_COUNT_PASSADO_SUCCESS = 'FETCH_USER_COUNT_PASSADO_SUCCESS';\nexport const FETCH_USER_COUNT_SITES_PASSADO_SUCCESS = 'FETCH_USER_COUNT_SITES_PASSADO_SUCCESS';\nexport const FETCH_USER_COUNT_FAILURE = 'FETCH_USER_COUNT_FAILURE';\nconst URL = \"http://51.15.99.120:4700\";\nconst config = {\n  headers: {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Headers\": \"*\"\n  }\n};\nexport const fetchUserCountBegin = () => ({\n  type: FETCH_USER_COUNT_BEGIN\n});\nexport const fetchUserCountSuccess = user => ({\n  type: FETCH_USER_COUNT_SUCCESS,\n  payload: {\n    user\n  }\n});\nexport const fetchUserCountSitesSuccess = sites => ({\n  type: FETCH_USER_COUNT_SITES_SUCCESS,\n  payload: {\n    sites\n  }\n});\nexport const fetchUserCountPassadoSuccess = (userPassado, porcentagem) => ({\n  type: FETCH_USER_COUNT_PASSADO_SUCCESS,\n  payload: {\n    userPassado\n  },\n  porcentagem: {\n    porcentagem\n  }\n});\nexport const fetchUserCountSitesPassadoSuccess = (sitesPassado, porcentagem) => ({\n  type: FETCH_USER_COUNT_SITES_PASSADO_SUCCESS,\n  payload: {\n    sitesPassado\n  },\n  porcentagem: {\n    porcentagem\n  }\n});\nexport const fetchUserCountFailure = error => ({\n  type: FETCH_USER_COUNT_FAILURE,\n  payload: {\n    error\n  }\n});\nexport function fetchUserCount(periodo = null) {\n  if (periodo === \"mensal\") {\n    return dispatch => {\n      dispatch(fetchUserCountBegin());\n      return axios.get(\"\".concat(URL, \"/count/users/30\"), config).then(response => {\n        var totalAtual = 0;\n        var totalPassado = 0;\n        var porcentagem = 0;\n        let data = response.data;\n        let total = data.total;\n        totalAtual = total;\n        dispatch(fetchUserCountSuccess(total));\n        axios.get(\"\".concat(URL, \"/count/users/60\"), config).then(response => {\n          let data = response.data;\n          let total = data.total;\n          totalPassado = total;\n          var diferenca = totalAtual - totalPassado;\n\n          if (diferenca < 0) {\n            diferenca = diferenca * -1;\n            porcentagem = diferenca * 100 / totalPassado;\n          } else {\n            porcentagem = diferenca * 100 / totalPassado;\n          }\n\n          dispatch(fetchUserCountPassadoSuccess(totalPassado, parseFloat(porcentagem.toFixed(2))));\n        });\n      }).catch(error => dispatch(fetchUserCountFailure(error)));\n    };\n  }\n\n  return dispatch => {\n    dispatch(fetchUserCountBegin());\n    return axios.get(\"\".concat(URL, \"/count/users/1\"), config).then(response => {\n      var totalAtual = 0;\n      var totalPassado = 0;\n      var porcentagem = 0;\n      let data = response.data;\n      let total = data.total;\n      totalAtual = total;\n      dispatch(fetchUserCountSuccess(total));\n      axios.get(\"\".concat(URL, \"/count/users/7\"), config).then(response => {\n        let data = response.data;\n        let total = data.total;\n        totalPassado = total;\n        var diferenca = totalAtual - totalPassado;\n\n        if (diferenca < 0) {\n          diferenca = diferenca * -1;\n          porcentagem = diferenca * 100 / totalPassado;\n        } else {\n          porcentagem = diferenca * 100 / totalPassado;\n        }\n\n        dispatch(fetchUserCountPassadoSuccess(totalPassado, porcentagem));\n      });\n    }).catch(error => dispatch(fetchUserCountFailure(error)));\n  };\n}\nexport function fetchUserSites(periodo = null) {\n  if (periodo === \"diario\") {\n    return dispatch => {\n      dispatch(fetchUserCountBegin());\n      return axios.get(\"\".concat(URL, \"/count/sites/1\"), config).then(response => {\n        var totalAtual = 0;\n        var totalPassado = 0;\n        var porcentagem = 0;\n        let data = response.data;\n        let total = data.total;\n        totalAtual = total;\n        dispatch(fetchUserCountSitesSuccess(total));\n        axios.get(\"\".concat(URL, \"/count/sites/2\"), config).then(response => {\n          let data = response.data;\n          let total = data.total;\n          totalPassado = total;\n          var diferenca = totalAtual - totalPassado;\n\n          if (diferenca < 0) {\n            diferenca = diferenca * -1;\n            porcentagem = diferenca * 100 / totalPassado;\n          } else {\n            porcentagem = diferenca * 100 / totalPassado;\n          }\n\n          dispatch(fetchUserCountSitesPassadoSuccess(totalPassado, porcentagem));\n        });\n      }).catch(error => dispatch(fetchUserCountFailure(error)));\n    };\n  }\n\n  if (periodo === \"mensal\") {\n    return dispatch => {\n      dispatch(fetchUserCountBegin());\n      return axios.get(\"\".concat(URL, \"/count/sites/30\"), config).then(response => {\n        var totalAtual = 0;\n        var totalPassado = 0;\n        var porcentagem = 0;\n        let data = response.data;\n        let total = data.total;\n        totalAtual = total;\n        dispatch(fetchUserCountSitesSuccess(total));\n        axios.get(\"\".concat(URL, \"/count/sites/60\"), config).then(response => {\n          let data = response.data;\n          let total = data.total;\n          totalPassado = total;\n          var diferenca = totalAtual - totalPassado;\n\n          if (diferenca < 0) {\n            diferenca = diferenca * -1;\n            porcentagem = diferenca * 100 / totalPassado;\n          } else {\n            porcentagem = diferenca * 100 / totalPassado;\n          }\n\n          dispatch(fetchUserCountSitesPassadoSuccess(totalPassado, porcentagem));\n        });\n      }).catch(error => dispatch(fetchUserCountFailure(error)));\n    };\n  }\n\n  return dispatch => {\n    dispatch(fetchUserCountBegin());\n    return axios.get(\"\".concat(URL, \"/count/sites/1\"), config).then(response => {\n      var totalAtual = 0;\n      var totalPassado = 0;\n      var porcentagem = 0;\n      let data = response.data;\n      let total = data.total;\n      totalAtual = total;\n      dispatch(fetchUserCountSitesSuccess(total));\n      axios.get(\"\".concat(URL, \"/count/sites/7\"), config).then(response => {\n        let data = response.data;\n        let total = data.total;\n        totalPassado = total;\n        var diferenca = totalAtual - totalPassado;\n\n        if (diferenca < 0) {\n          diferenca = diferenca * -1;\n          porcentagem = diferenca * 100 / totalPassado;\n        } else {\n          porcentagem = diferenca * 100 / totalPassado;\n        }\n\n        dispatch(fetchUserCountSitesPassadoSuccess(totalPassado, porcentagem));\n      });\n    }).catch(error => dispatch(fetchUserCountFailure(error)));\n  };\n}","map":{"version":3,"sources":["/Users/rudolfo/Documents/projects/NetGift/src/actions/usersActions.js"],"names":["axios","parse","FETCH_USER_COUNT_BEGIN","FETCH_USER_COUNT_SUCCESS","FETCH_USER_COUNT_SITES_SUCCESS","FETCH_USER_COUNT_PASSADO_SUCCESS","FETCH_USER_COUNT_SITES_PASSADO_SUCCESS","FETCH_USER_COUNT_FAILURE","URL","config","headers","fetchUserCountBegin","type","fetchUserCountSuccess","user","payload","fetchUserCountSitesSuccess","sites","fetchUserCountPassadoSuccess","userPassado","porcentagem","fetchUserCountSitesPassadoSuccess","sitesPassado","fetchUserCountFailure","error","fetchUserCount","periodo","dispatch","get","then","response","totalAtual","totalPassado","data","total","diferenca","parseFloat","toFixed","catch","fetchUserSites"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { parse } from \"path\";\n\nexport const FETCH_USER_COUNT_BEGIN   = 'FETCH_USER_COUNT_BEGIN';\nexport const FETCH_USER_COUNT_SUCCESS   = 'FETCH_USER_COUNT_SUCCESS';\nexport const FETCH_USER_COUNT_SITES_SUCCESS = 'FETCH_USER_COUNT_SITES_SUCCESS';\nexport const FETCH_USER_COUNT_PASSADO_SUCCESS   = 'FETCH_USER_COUNT_PASSADO_SUCCESS';\nexport const FETCH_USER_COUNT_SITES_PASSADO_SUCCESS   = 'FETCH_USER_COUNT_SITES_PASSADO_SUCCESS';\nexport const FETCH_USER_COUNT_FAILURE = 'FETCH_USER_COUNT_FAILURE';\n\nconst URL   = \"http://51.15.99.120:4700\";\n\nconst config = {\n  headers: {\"Access-Control-Allow-Origin\": \"*\", \"Access-Control-Allow-Headers\": \"*\"},\n}\n\nexport const fetchUserCountBegin = () => ({\n  type: FETCH_USER_COUNT_BEGIN\n});\n\nexport const fetchUserCountSuccess = user=> ({\n  type: FETCH_USER_COUNT_SUCCESS,\n  payload: {user}\n});\n\nexport const fetchUserCountSitesSuccess = sites=> ({\n  type: FETCH_USER_COUNT_SITES_SUCCESS,\n  payload: {sites}\n});\n\nexport const fetchUserCountPassadoSuccess = (userPassado, porcentagem) => ({\n  type: FETCH_USER_COUNT_PASSADO_SUCCESS,\n  payload: {userPassado},\n  porcentagem: {porcentagem}\n})\n\nexport const fetchUserCountSitesPassadoSuccess = (sitesPassado, porcentagem) => ({\n  type: FETCH_USER_COUNT_SITES_PASSADO_SUCCESS,\n  payload: {sitesPassado},\n  porcentagem: {porcentagem}\n})\n\nexport const fetchUserCountFailure = error => ({\n  type: FETCH_USER_COUNT_FAILURE,\n  payload: { error }\n});\n\nexport function fetchUserCount(periodo = null) {\n\n    if(periodo === \"mensal\"){\n      return dispatch => {\n\n        dispatch(fetchUserCountBegin());\n  \n        return axios.get(`${URL}/count/users/30`, config)\n          .then((response) => {\n            var totalAtual = 0;\n            var totalPassado = 0;\n            var porcentagem = 0;\n  \n            let {data} = response;\n            let {total} = data;\n            totalAtual = total;\n            dispatch(fetchUserCountSuccess(total))\n  \n            axios.get(`${URL}/count/users/60`, config)\n            .then((response) => {\n              let {data} = response;\n              let {total} = data;\n              totalPassado = total;\n              var diferenca = totalAtual - totalPassado;\n\n            if(diferenca < 0){\n              diferenca = diferenca * (-1);\n              porcentagem = (diferenca * 100) / totalPassado;\n            }else{\n              porcentagem = (diferenca * 100) / totalPassado;\n            }\n  \n              dispatch(fetchUserCountPassadoSuccess(totalPassado, parseFloat(porcentagem.toFixed(2))))\n  \n            })\n  \n  \n            })\n          .catch(error => dispatch(fetchUserCountFailure(error)));\n      };\n    }\n\n      return dispatch => {\n\n      dispatch(fetchUserCountBegin());\n\n      return axios.get(`${URL}/count/users/1`, config)\n        .then((response) => {\n          var totalAtual = 0;\n          var totalPassado = 0;\n          var porcentagem = 0;\n\n          let {data} = response;\n          let {total} = data;\n          totalAtual = total;\n          dispatch(fetchUserCountSuccess(total))\n\n          axios.get(`${URL}/count/users/7`, config)\n          .then((response) => {\n            let {data} = response;\n            let {total} = data;\n            totalPassado = total;\n            var diferenca = totalAtual - totalPassado;\n\n            if(diferenca < 0){\n              diferenca = diferenca * (-1);\n              porcentagem = (diferenca * 100) / totalPassado;\n            }else{\n              porcentagem = (diferenca * 100) / totalPassado;\n            }\n            \n            dispatch(fetchUserCountPassadoSuccess(totalPassado, porcentagem))\n\n          })\n\n          })\n        .catch(error => dispatch(fetchUserCountFailure(error)));\n    };\n\n}\n\nexport function fetchUserSites(periodo = null) {\n\n  if(periodo === \"diario\"){\n    return dispatch => {\n\n      dispatch(fetchUserCountBegin());\n  \n      return axios.get(`${URL}/count/sites/1`, config)\n        .then((response) => {\n          var totalAtual = 0;\n          var totalPassado = 0;\n          var porcentagem = 0;\n  \n          let {data} = response;\n          let {total} = data;\n          totalAtual = total;\n          dispatch(fetchUserCountSitesSuccess(total))\n  \n          axios.get(`${URL}/count/sites/2`, config)\n          .then((response) => {\n            let {data} = response;\n            let {total} = data;\n            totalPassado = total;\n  \n            var diferenca = totalAtual - totalPassado;\n\n            if(diferenca < 0){\n              diferenca = diferenca * (-1);\n              porcentagem = (diferenca * 100) / totalPassado;\n            }else{\n              porcentagem = (diferenca * 100) / totalPassado;\n            }\n  \n            dispatch(fetchUserCountSitesPassadoSuccess(totalPassado, porcentagem))\n  \n  \n          })\n  \n  \n          })\n        .catch(error => dispatch(fetchUserCountFailure(error)));\n    };\n  }\n\n  if(periodo === \"mensal\"){\n    return dispatch => {\n\n      dispatch(fetchUserCountBegin());\n  \n      return axios.get(`${URL}/count/sites/30`, config)\n        .then((response) => {\n          var totalAtual = 0;\n          var totalPassado = 0;\n          var porcentagem = 0;\n  \n          let {data} = response;\n          let {total} = data;\n          totalAtual = total;\n          dispatch(fetchUserCountSitesSuccess(total))\n  \n          axios.get(`${URL}/count/sites/60`, config)\n          .then((response) => {\n            let {data} = response;\n            let {total} = data;\n            totalPassado = total;\n  \n            var diferenca = totalAtual - totalPassado;\n\n            if(diferenca < 0){\n              diferenca = diferenca * (-1);\n              porcentagem = (diferenca * 100) / totalPassado;\n            }else{\n              porcentagem = (diferenca * 100) / totalPassado;\n            }\n  \n            dispatch(fetchUserCountSitesPassadoSuccess(totalPassado, porcentagem))\n  \n  \n          })\n  \n  \n          })\n        .catch(error => dispatch(fetchUserCountFailure(error)));\n    };\n  }\n\n    return dispatch => {\n\n    dispatch(fetchUserCountBegin());\n\n    return axios.get(`${URL}/count/sites/1`, config)\n      .then((response) => {\n        var totalAtual = 0;\n        var totalPassado = 0;\n        var porcentagem = 0;\n\n        let {data} = response;\n        let {total} = data;\n        totalAtual = total;\n        dispatch(fetchUserCountSitesSuccess(total))\n\n        axios.get(`${URL}/count/sites/7`, config)\n        .then((response) => {\n          let {data} = response;\n          let {total} = data;\n          totalPassado = total;\n\n          var diferenca = totalAtual - totalPassado;\n\n            if(diferenca < 0){\n              diferenca = diferenca * (-1);\n              porcentagem = (diferenca * 100) / totalPassado;\n            }else{\n              porcentagem = (diferenca * 100) / totalPassado;\n            }\n\n          dispatch(fetchUserCountSitesPassadoSuccess(totalPassado, porcentagem))\n\n\n        })\n\n\n        })\n      .catch(error => dispatch(fetchUserCountFailure(error)));\n  };\n}\n"]},"metadata":{},"sourceType":"module"}