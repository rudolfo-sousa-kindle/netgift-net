{"ast":null,"code":"var _jsxFileName = \"/Users/rudolfo/Documents/projects/NetGift/src/components/DashboardAdminHome.js\";\nimport React, { Component } from \"react\";\nimport setSelect2 from \"../assets/js/setSelect2\";\nimport { connect } from \"react-redux\";\nimport Extrato from \"./ExtratoAdmin\";\nimport GridCards from \"./GridCards\";\nimport { fetchUserCount, fetchUserSites } from \"../actions/usersActions\";\nimport { fetchViewCount } from \"../actions/viewsActions\";\nimport { fetchExtratoAbstract } from \"../actions/extratoActions\";\nimport Select from 'react-select';\nimport $ from \"jquery\";\n\nclass Dashboard extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.change = field => {\n      let periodo = field.value;\n      this.props.fetchUserCount(periodo);\n      this.props.fetchViewCount();\n      this.props.fetchUserSites(periodo);\n      this.props.fetchExtratoAbstract(null, null, null, null, null, null, 1, periodo);\n    };\n\n    this.state = {\n      views: {\n        current: '--',\n        old: '--',\n        percent: '--'\n      },\n      users: {\n        current: '--',\n        old: '--',\n        percent: '--'\n      },\n      sites: {\n        current: '--',\n        old: '--',\n        percent: '--'\n      },\n      receive: {\n        current: '--',\n        old: '--',\n        percent: '--'\n      },\n      payments: {\n        current: '--',\n        old: '--',\n        percent: '--'\n      },\n      financial: {}\n    };\n  }\n\n  componentDidMount() {\n    // setSelect2();\n    this.props.fetchUserCount();\n    this.props.fetchViewCount();\n    this.props.fetchUserSites();\n    this.props.fetchExtratoAbstract(null, null, null, null, null, null, 1, 1);\n  }\n\n  render() {\n    const _this$props$usersCoun = this.props.usersCount,\n          total = _this$props$usersCoun.total,\n          totalPassado = _this$props$usersCoun.totalPassado,\n          loading = _this$props$usersCoun.loading,\n          error = _this$props$usersCoun.error,\n          porcentagem = _this$props$usersCoun.porcentagem,\n          totalSites = _this$props$usersCoun.totalSites,\n          totalSitePassado = _this$props$usersCoun.totalSitePassado,\n          porcentagemSites = _this$props$usersCoun.porcentagemSites;\n    const loadingExtrato = this.props.extrato.loading;\n    const extrato = this.props.extrato.extrato;\n    const dashboard = extrato.dashboard;\n    const extratoOld = this.props.extrato.extratoOld;\n    const extratoAbstract = this.props.extratoAbstract;\n    var recebidoOld;\n\n    if (undefined !== this.props.views) {\n      this.state.views.current = this.props.views.total;\n      this.state.views.old = this.props.views.totalPassado;\n      this.state.views.percent = parseFloat(this.state.views.current * (this.state.views.old / 100));\n    }\n\n    this.state.users.current = total;\n    this.state.users.old = totalPassado;\n    this.state.users.percent = parseFloat(this.state.users.current * (this.state.users.old / 100));\n\n    if (undefined !== extratoAbstract && undefined !== extratoAbstract.dashboard.last_period) {\n      this.state.payments.old = extratoAbstract.dashboard.last_period.netgift.recebido.toFixed(2).replace(\".\", \",\");\n      this.state.receive.old = extratoAbstract.dashboard.last_period.total.toFixed(2).replace(\".\", \",\");\n    }\n\n    if (undefined !== extratoAbstract) {\n      this.state.financial = extratoAbstract.financial;\n      this.state.receive.current = extratoAbstract.dashboard.total.toFixed(2).replace(\".\", \",\");\n      this.state.payments.current = extratoAbstract.dashboard.netgift.recebido.toFixed(2).replace(\".\", \",\");\n    } else {\n      this.state.financial = {};\n      this.state.receive.current = \"--\";\n      this.state.payments.current = \"--\";\n    }\n\n    return React.createElement(\"div\", {\n      className: \"wrap-content home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flex flex-baseline flex-space\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Dashboard\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Voc\\xEA est\\xE1 no painel principal\")), React.createElement(\"div\", {\n      className: \"filter-admin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Select, {\n      onChange: this.change,\n      options: [{\n        value: 1,\n        label: 'Diário'\n      }, {\n        value: 7,\n        label: 'Semanal'\n      }, {\n        value: 30,\n        label: 'Mensal'\n      }],\n      isSearchable: false,\n      id: \"filter-date\",\n      className: \"status-filter\",\n      name: \"filter_date\",\n      closeMenuOnSelect: true,\n      placeholder: \"Di\\xE1rio\",\n      noOptionsMessage: () => {\n        return \"Tipo não encontrado.\";\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"wrap-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"dash-cards grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(GridCards, {\n      label: \"Visitas\",\n      value: this.state.views.current,\n      value_old: this.state.views.old,\n      porcentagem: this.state.views.percent ? this.state.views.percent : \"--\",\n      pre_values: \"\",\n      arrow: this.state.views.current >= this.state.views.old ? 'up' : 'down',\n      loading: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(GridCards, {\n      label: \"Novos Usu\\xE1rios\",\n      value: total,\n      value_old: totalPassado,\n      porcentagem: porcentagem ? porcentagem : \"--\",\n      pre_values: \"\",\n      arrow: total >= totalPassado ? 'up' : 'down',\n      loading: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(GridCards, {\n      label: \"Novos Sites\",\n      value: totalSites ? totalSites : \"--\",\n      value_old: totalSitePassado ? totalSitePassado : \"--\",\n      porcentagem: porcentagemSites ? porcentagemSites : \"--\",\n      pre_values: \"\",\n      arrow: totalSites >= totalSitePassado ? 'up' : 'down',\n      loading: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(GridCards, {\n      label: \"Faturamento\",\n      loading: loading,\n      value: dashboard ? this.state.receive.current : \"--\",\n      value_old: dashboard ? this.state.receive.old : \"--\",\n      pre_values: \"R$\",\n      arrow: this.state.receive.current >= this.state.receive.old ? 'up' : 'down',\n      porcentagem: 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(GridCards, {\n      label: \"Pagamentos\",\n      loading: loading,\n      value: dashboard ? this.state.payments.current : \"--\",\n      value_old: dashboard ? this.state.payments.old : \"--\",\n      pre_values: \"R$\",\n      arrow: this.state.payments.current >= this.state.payments.old ? 'up' : 'down',\n      porcentagem: 0 ? 0 : \"--\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }))), React.createElement(Extrato, {\n      financial: this.state.financial,\n      from_class: \"dashboard-from\",\n      to_class: \"dashboard-to\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  extrato: state.extrato,\n  usersCount: state.usersCount,\n  extrato: state.extrato,\n  extratoAbstract: state.extrato.extratoAbstract,\n  views: state.viewsCount\n});\n\nexport default connect(mapStateToProps, {\n  fetchUserCount,\n  fetchUserSites,\n  fetchExtratoAbstract,\n  fetchViewCount\n})(Dashboard);","map":{"version":3,"sources":["/Users/rudolfo/Documents/projects/NetGift/src/components/DashboardAdminHome.js"],"names":["React","Component","setSelect2","connect","Extrato","GridCards","fetchUserCount","fetchUserSites","fetchViewCount","fetchExtratoAbstract","Select","$","Dashboard","change","field","periodo","value","props","state","views","current","old","percent","users","sites","receive","payments","financial","componentDidMount","render","usersCount","total","totalPassado","loading","error","porcentagem","totalSites","totalSitePassado","porcentagemSites","loadingExtrato","extrato","dashboard","extratoOld","extratoAbstract","recebidoOld","undefined","parseFloat","last_period","netgift","recebido","toFixed","replace","label","mapStateToProps","viewsCount"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport setSelect2 from \"../assets/js/setSelect2\";\nimport { connect } from \"react-redux\";\nimport Extrato from \"./ExtratoAdmin\";\nimport GridCards from \"./GridCards\";\nimport {fetchUserCount, fetchUserSites} from \"../actions/usersActions\";\nimport {fetchViewCount} from \"../actions/viewsActions\";\nimport { fetchExtratoAbstract } from \"../actions/extratoActions\";\nimport Select from 'react-select';\n\nimport $ from \"jquery\";\n\nclass Dashboard extends Component {\n\n    componentDidMount(){\n        // setSelect2();\n        this.props.fetchUserCount();\n        this.props.fetchViewCount();\n        this.props.fetchUserSites();\n        this.props.fetchExtratoAbstract(null, null, null, null, null, null, 1, 1);\n    }\n\n    change = ( field ) => {\n        let periodo = field.value;\n        this.props.fetchUserCount( periodo );\n        this.props.fetchViewCount();\n        this.props.fetchUserSites( periodo );\n        this.props.fetchExtratoAbstract( null, null, null, null, null, null, 1, periodo );\n    }\n\n    state = {\n        views: { current: '--', old: '--', percent: '--' },\n        users: { current: '--', old: '--', percent: '--' },\n        sites: { current: '--', old: '--', percent: '--' },\n        receive: { current: '--', old: '--', percent: '--' },\n        payments: { current: '--', old: '--', percent: '--' },\n        financial:{}\n    }\n\n\n    render() {\n        const {total, totalPassado, loading, error, porcentagem, totalSites, totalSitePassado, porcentagemSites} = this.props.usersCount;\n        const loadingExtrato = this.props.extrato.loading;\n        const {extrato} = this.props.extrato;\n        const {dashboard} = extrato;\n        const {extratoOld} = this.props.extrato;\n        const extratoAbstract = this.props.extratoAbstract;\n        var recebidoOld\n\n        if ( undefined !== this.props.views ) {\n            this.state.views.current = this.props.views.total;\n            this.state.views.old = this.props.views.totalPassado;\n            this.state.views.percent = parseFloat(this.state.views.current*(this.state.views.old/100));\n        }\n\n        this.state.users.current = total;\n        this.state.users.old     = totalPassado;\n        this.state.users.percent = parseFloat(this.state.users.current*(this.state.users.old/100));\n        \n        if(undefined !== extratoAbstract && undefined !== extratoAbstract.dashboard.last_period ){\n            this.state.payments.old = extratoAbstract.dashboard.last_period.netgift.recebido.toFixed(2).replace(\".\", \",\");\n            this.state.receive.old  = extratoAbstract.dashboard.last_period.total.toFixed(2).replace(\".\", \",\");\n        }\n\n        if(undefined !== extratoAbstract){\n            this.state.financial= extratoAbstract.financial;\n            this.state.receive.current = extratoAbstract.dashboard.total.toFixed(2).replace(\".\", \",\")\n            this.state.payments.current = extratoAbstract.dashboard.netgift.recebido.toFixed(2).replace(\".\", \",\")\n        }else{\n            this.state.financial = {};\n            this.state.receive.current  = \"--\"\n            this.state.payments.current = \"--\"\n        }\n\n        return (\n            <div className=\"wrap-content home\">\n                <div className=\"content-title\">\n                    <div className=\"flex flex-baseline flex-space\">\n                        <div>\n                            <h1>Dashboard</h1>\n                            <h2>Você está no painel principal</h2>\n                        </div>\n                        <div className=\"filter-admin\">\n                            <Select\n                                onChange={this.change}\n                                options={[\n                                    {value: 1, label: 'Diário'},\n                                    {value: 7, label: 'Semanal'},\n                                    {value: 30, label: 'Mensal'},\n                                ]}\n                                isSearchable={false}\n                                id=\"filter-date\"\n                                className=\"status-filter\"\n                                name=\"filter_date\"\n                                closeMenuOnSelect={true}\n                                placeholder=\"Diário\"\n                                noOptionsMessage={() => { return \"Tipo não encontrado.\" }}\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"wrap-body\">\n                    <div className=\"dash-cards grid\">\n                        <GridCards\n                            label='Visitas'\n                            value={this.state.views.current}\n                            value_old={this.state.views.old}\n                            porcentagem={this.state.views.percent ? this.state.views.percent : \"--\"}\n                            pre_values=\"\"\n                            arrow={this.state.views.current >= this.state.views.old ? 'up' : 'down'}\n                            loading={loading}\n                        />\n                        <GridCards\n                            label='Novos Usuários'\n                            value={total}\n                            value_old={totalPassado}\n                            porcentagem={porcentagem ? porcentagem : \"--\"}\n                            pre_values=\"\"\n                            arrow={total >= totalPassado ? 'up' : 'down'}\n                            loading={loading}\n                        />\n                        <GridCards\n                            label='Novos Sites'\n                            value={totalSites ? totalSites : \"--\"}\n                            value_old={totalSitePassado ? totalSitePassado : \"--\"}\n                            porcentagem={porcentagemSites ? porcentagemSites : \"--\"}\n                            pre_values=\"\"\n                            arrow={totalSites >= totalSitePassado ? 'up' : 'down'}\n                            loading={loading}\n                        />\n                        <GridCards\n                            label='Faturamento'\n                            loading={loading}\n                            value={dashboard ? this.state.receive.current : \"--\"}\n                            value_old={dashboard ? this.state.receive.old : \"--\"}\n                            pre_values=\"R$\"\n                            arrow={this.state.receive.current >= this.state.receive.old ? 'up' : 'down'}\n                            porcentagem={0}\n                        />\n                        <GridCards\n                            label='Pagamentos'\n                            loading={loading}\n                            value={dashboard ? this.state.payments.current : \"--\"}\n                            value_old={dashboard ? this.state.payments.old : \"--\"}\n                            pre_values=\"R$\"\n                            arrow={this.state.payments.current >= this.state.payments.old ? 'up' : 'down'}\n                            porcentagem={0 ? 0 : \"--\"}\n                        />\n                    </div>\n                </div>\n                <Extrato\n                    financial= {this.state.financial}\n                    from_class= \"dashboard-from\"\n                    to_class= \"dashboard-to\"\n                />\n            </div>\n        )\n    }\n}\nconst mapStateToProps = state => ({\n    extrato: state.extrato,\n    usersCount: state.usersCount,\n    extrato: state.extrato,\n    extratoAbstract : state.extrato.extratoAbstract,\n    views : state.viewsCount\n  })\n\nexport default connect(mapStateToProps, {fetchUserCount, fetchUserSites, fetchExtratoAbstract, fetchViewCount})(Dashboard);\n"]},"metadata":{},"sourceType":"module"}