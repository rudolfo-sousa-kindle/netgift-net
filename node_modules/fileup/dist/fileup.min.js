/*!
  * fileup 
  * v0.0.1
  * https://github.com/jgallen23/fileup
  * copyright JGA 2011
  * MIT License
  */
!function(a,b){typeof module!="undefined"&&module.exports?module.exports=b():typeof define=="function"&&typeof define.amd=="object"?define(b):this[a]=b()}("fileUp",function(){var a=0,b=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!0):a.attachEvent&&(b="on"+b,a.attachEvent(b,c))},c=function(c,d){var e=function(){var e="__framejax__"+a++,f=document.createElement("iframe");f.name=e,f.id=e,f.width="0",f.height="0",f.style.display="none",c.target=e;var g=function(){var a=document.getElementById(e),b=null;a.contentDocument&&(b=a.contentDocument),a.contentWindow&&(b=a.contentWindow.document),d(b.body.innerHTML)};b(f,"load",g),document.body.appendChild(f)};return b(c,"submit",e),function(){e(),c.submit()}},d=function(a){return this.el=a,this.addForm(),this.onStart=function(){},this.onComplete=function(){},b(a,"mousemove",this.proxy(this.overlayInput)),this};d.prototype.action=function(a){return this.form.action=a,this},d.prototype.start=function(a){return this.onStart=a,this},d.prototype.complete=function(a){return this.onComplete=a,this},d.prototype.proxy=function(a){var b=this;return function(){if(!a)return;return a.apply(b,arguments)}},d.prototype.overlayInput=function(a){typeof a=="undefined"&&(a=window.event),typeof a.pageY=="undefined"&&typeof a.clientX=="number"&&document.documentElement&&(a.pageX=a.clientX+document.documentElement.scrollLeft,a.pageY=a.clientY+document.documentElement.scrollTop);var b=oy=0,c=this;if(c.offsetParent){b=c.offsetLeft,oy=c.offsetTop;while(c=c.offsetParent)b+=c.offsetLeft,oy+=c.offsetTop}var d=a.pageX-b,e=a.pageY-oy,f=this.input.offsetWidth,g=this.input.offsetHeight;this.input.style.top=e-g/2+"px",this.input.style.left=d-(f-30)+"px"},d.prototype.addForm=function(){this.form=document.createElement("form"),this.form.action=window.location.href,this.form.method="POST",this.form.enctype="multipart/form-data",this.input=document.createElement("input"),this.input.style.position="absolute",this.input.name="file",this.input.type="file",this.input.style.opacity="0",this.input.style.cursor="pointer",b(this.input,"change",this.proxy(this.fileSelected)),this.form.appendChild(this.input),document.body.appendChild(this.form),this.submit=c(this.form,this.proxy(this._uploadComplete))},d.prototype._uploadComplete=function(a){this.onComplete(a)},d.prototype.fileSelected=function(){this.onStart(),this.submit()};var e=function(a){return new d(a)};return e})